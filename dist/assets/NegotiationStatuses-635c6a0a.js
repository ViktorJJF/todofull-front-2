import{an as B,o as h,c as d,a as u,al as g,a3 as U,q as y,J as w,K as D,F as k,j as V,p,t as b,ao as $,a4 as j,r as C,w as c,b as I,g as K,d as S,n as ee,H as te,I as se}from"./index-14e84a03.js";import{_ as ie}from"./_plugin-vue_export-helper-c27b6911.js";const R={HOUR_TOKENS:["HH","H","hh","h","kk","k"],MINUTE_TOKENS:["mm","m"],SECOND_TOKENS:["ss","s"],APM_TOKENS:["A","a"],BASIC_TYPES:["hour","minute","second","apm"]},N={format:"HH:mm",minuteInterval:1,secondInterval:1,hourRange:null,minuteRange:null,secondRange:null,hideDisabledHours:!1,hideDisabledMinutes:!1,hideDisabledSeconds:!1,hideDisabledItems:!1,advancedKeyboard:!1,hideDropdown:!1,blurDelay:300,manualInputTimeout:1e3,dropOffsetHeight:160};var J={name:"VueTimepicker",props:{modelValue:{type:[Object,String]},format:{type:String},minuteInterval:{type:[Number,String]},secondInterval:{type:[Number,String]},hourRange:{type:Array},minuteRange:{type:Array},secondRange:{type:Array},hideDisabledHours:{type:Boolean,default:!1},hideDisabledMinutes:{type:Boolean,default:!1},hideDisabledSeconds:{type:Boolean,default:!1},hideDisabledItems:{type:Boolean,default:!1},hideClearButton:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},closeOnComplete:{type:Boolean,default:!1},id:{type:String},name:{type:String},inputClass:{type:[String,Object,Array]},placeholder:{type:String},tabindex:{type:[Number,String],default:0},inputWidth:{type:String},autocomplete:{type:String,default:"off"},hourLabel:{type:String},minuteLabel:{type:String},secondLabel:{type:String},apmLabel:{type:String},amText:{type:String},pmText:{type:String},blurDelay:{type:[Number,String]},advancedKeyboard:{type:Boolean,default:!1},lazy:{type:Boolean,default:!1},autoScroll:{type:Boolean,default:!1},dropDirection:{type:String,default:"down"},dropOffsetHeight:{type:[Number,String]},containerId:{type:String},manualInput:{type:Boolean,default:!1},manualInputTimeout:{type:[Number,String]},hideDropdown:{type:Boolean,default:!1},fixedDropdownButton:{type:Boolean,default:!1},debugMode:{type:Boolean,default:!1}},data(){return{timeValue:{},hours:[],minutes:[],seconds:[],apms:[],isActive:!1,showDropdown:!1,isFocusing:!1,debounceTimer:void 0,hourType:"HH",minuteType:"mm",secondType:"",apmType:"",hour:"",minute:"",second:"",apm:"",fullValues:void 0,bakDisplayTime:void 0,doClearApmChecking:!1,selectionTimer:void 0,kbInputTimer:void 0,kbInputLog:"",bakCurrentPos:void 0,forceDropOnTop:!1}},emits:["update:modelValue","change","open","close","focus","blur","error"],computed:{opts(){const e=Object.assign({},N);return this.format&&this.format.length&&(e.format=String(this.format)),this.isNumber(this.minuteInterval)&&(e.minuteInterval=+this.minuteInterval),(!e.minuteInterval||e.minuteInterval<1||e.minuteInterval>60)&&(this.debugMode&&(e.minuteInterval>60?this.debugLog(`"minute-interval" should be less than 60. Current value is ${this.minuteInterval}`):(e.minuteInterval===0||e.minuteInterval<1)&&this.debugLog(`"minute-interval" should be NO less than 1. Current value is ${this.minuteInterval}`)),e.minuteInterval===0?e.minuteInterval=60:e.minuteInterval=1),this.isNumber(this.secondInterval)&&(e.secondInterval=+this.secondInterval),(!e.secondInterval||e.secondInterval<1||e.secondInterval>60)&&(this.debugMode&&(e.secondInterval>60?this.debugLog(`"second-interval" should be less than 60. Current value is ${this.secondInterval}`):(e.secondInterval===0||e.secondInterval<1)&&this.debugLog(`"second-interval" should be NO less than 1. Current value is ${this.secondInterval}`)),e.secondInterval===0?e.secondInterval=60:e.secondInterval=1),this.hourRange&&Array.isArray(this.hourRange)&&(e.hourRange=JSON.parse(JSON.stringify(this.hourRange)),!this.hourRange.length&&this.debugMode&&this.debugLog('The "hour-range" array is empty (length === 0)')),this.minuteRange&&Array.isArray(this.minuteRange)&&(e.minuteRange=JSON.parse(JSON.stringify(this.minuteRange)),!this.minuteRange.length&&this.debugMode&&this.debugLog('The "minute-range" array is empty (length === 0)')),this.secondRange&&Array.isArray(this.secondRange)&&(e.secondRange=JSON.parse(JSON.stringify(this.secondRange)),!this.secondRange.length&&this.debugMode&&this.debugLog('The "second-range" array is empty (length === 0)')),this.hideDisabledItems&&(e.hideDisabledItems=!0),(this.hideDisabledHours||this.hideDisabledItems)&&(e.hideDisabledHours=!0),(this.hideDisabledMinutes||this.hideDisabledItems)&&(e.hideDisabledMinutes=!0),(this.hideDisabledSeconds||this.hideDisabledItems)&&(e.hideDisabledSeconds=!0),this.hideDropdown&&(this.manualInput?e.hideDropdown=!0:this.debugMode&&this.debugLog('"hide-dropdown" only works with "manual-input" mode')),this.blurDelay&&+this.blurDelay>0&&(e.blurDelay=+this.blurDelay),this.manualInputTimeout&&+this.manualInputTimeout>0&&(e.manualInputTimeout=+this.manualInputTimeout),this.dropOffsetHeight&&+this.dropOffsetHeight>0&&(e.dropOffsetHeight=+this.dropOffsetHeight),e},useStringValue(){return typeof this.modelValue=="string"},formatString(){return this.opts.format||N.format},inUse(){const e=R.BASIC_TYPES.filter(i=>this.getTokenByType(i));e.sort((i,n)=>this.formatString.indexOf(this.getTokenByType(i)||null)-this.formatString.indexOf(this.getTokenByType(n)||null));const t=e.map(i=>this.getTokenByType(i));return{hour:!!this.hourType,minute:!!this.minuteType,second:!!this.secondType,apm:!!this.apmType,types:e||[],tokens:t||[]}},displayTime(){let e=String(this.formatString);return this.hour&&(e=e.replace(new RegExp(this.hourType,"g"),this.hour)),this.minute&&(e=e.replace(new RegExp(this.minuteType,"g"),this.minute)),this.second&&this.secondType&&(e=e.replace(new RegExp(this.secondType,"g"),this.second)),this.apm&&this.apmType&&(e=e.replace(new RegExp(this.apmType,"g"),this.apm)),e},customDisplayTime(){return!this.amText&&!this.pmText?this.displayTime:this.displayTime.replace(new RegExp(this.apm,"g"),this.apmDisplayText(this.apm))},inputIsEmpty(){return this.formatString===this.displayTime},allValueSelected(){return!(this.inUse.hour&&!this.hour||this.inUse.minute&&!this.minute||this.inUse.second&&!this.second||this.inUse.apm&&!this.apm)},columnsSequence(){return this.inUse.types.map(e=>e)||[]},showClearBtn(){return this.hideClearButton||this.disabled?!1:!this.inputIsEmpty},showDropdownBtn(){return!!(this.fixedDropdownButton||this.opts.hideDropdown&&this.isActive&&!this.showDropdown)},baseOn12Hours(){return this.hourType==="h"||this.hourType==="hh"},hourRangeIn24HrFormat(){if(!this.hourType||!this.opts.hourRange)return!1;if(!this.opts.hourRange.length)return[];const e=[];return this.opts.hourRange.forEach(t=>{if(t instanceof Array){t.length>2&&this.debugMode&&this.debugLog(`Nested array within "hour-range" must contain no more than two items. Only the first two items of ${JSON.stringify(t)} will be taken into account.`);let i=t[0],n=t[1]||t[0];this.is12hRange(i)&&(i=this.translate12hRange(i)),this.is12hRange(n)&&(n=this.translate12hRange(n));for(let l=+i;l<=+n;l++)l<0||l>24||e.includes(l)||e.push(l)}else{if(this.is12hRange(t)?t=this.translate12hRange(t):t=+t,t<0||t>24)return;e.includes(t)||e.push(t)}}),e.sort((t,i)=>t-i),e},restrictedHourRange(){return this.hourRangeIn24HrFormat?this.baseOn12Hours?this.hourRangeIn24HrFormat.map(t=>t===12?"12p":t===24||t===0?"12a":t>12?`${t%12}p`:`${t}a`):this.hourRangeIn24HrFormat:!1},validHoursList(){if(!this.manualInput)return!1;if(this.restrictedHourRange){let e=[];if(this.baseOn12Hours){e=this.restrictedHourRange.map(i=>{const n=i.substr(0,i.length-1),l=i.substr(-1);return`${this.formatValue(this.hourType,n)}${l}`});const t=e.indexOf("12a");return t>0&&e.unshift(e.splice(t,1)[0]),e}return e=this.restrictedHourRange.map(t=>this.formatValue(this.hourType,t)),e.length>1&&e[0]&&e[0]==="24"&&e.push(e.shift()),e}return this.baseOn12Hours?[].concat([],this.hours.map(e=>`${e}a`),this.hours.map(e=>`${e}p`)):this.hours},has(){const e={customApmText:!1},t=!!this.apmType;if(t&&this.hourRangeIn24HrFormat&&this.hourRangeIn24HrFormat.length){const i=[].concat([],this.hourRangeIn24HrFormat);e.am=i.some(n=>n<12||n===24),e.pm=i.some(n=>n>=12&&n<24)}else e.am=t,e.pm=t;return(this.amText&&this.amText.length||this.pmText&&this.pmText.length)&&(e.customApmText=!0),e},minuteRangeList(){return!this.minuteType||!this.opts.minuteRange?!1:this.opts.minuteRange.length?this.renderRangeList(this.opts.minuteRange,"minute"):[]},secondRangeList(){return!this.secondType||!this.opts.secondRange?!1:this.opts.secondRange.length?this.renderRangeList(this.opts.secondRange,"second"):[]},hourLabelText(){return this.hourLabel||this.hourType},minuteLabelText(){return this.minuteLabel||this.minuteType},secondLabelText(){return this.secondLabel||this.secondType},apmLabelText(){return this.apmLabel||this.apmType},inputWidthStyle(){if(!(!this.inputWidth||!this.inputWidth.length))return{width:this.inputWidth}},tokenRegexBase(){return this.inUse.tokens.join("|")},tokenChunks(){if(!this.manualInput&&!this.useStringValue)return!1;const e=String(this.formatString),t=`(${this.tokenRegexBase})+?`,i=this.getMatchAllByRegex(e,t),n=[];for(let l of i){const s=l[0],a={index:l.index,token:s,type:this.getTokenType(s),needsCalibrate:s.length<2,len:(s||"").length};n.push(a)}return n},needsPosCalibrate(){return this.manualInput?this.tokenChunks.some(e=>e.needsCalibrate):!1},tokenChunksPos(){if(!this.manualInput)return!1;if(!this.needsPosCalibrate)return this.tokenChunks.map(i=>({token:i.token,type:i.type,start:i.index,end:i.index+i.len}));const e=[];let t=0;return this.tokenChunks.forEach(i=>{let n;if(i.type==="apm"&&this.has.customApmText)if(this.apm&&this.apm.length){const l=this.apm.toLowerCase()==="am"?this.amText:this.pmText;n=l&&l.length?l.length:i.len}else n=i.len;else n=this[i.type]&&this[i.type].length?this[i.type].length:i.len;e.push({token:i.token,type:i.type,start:i.index+t,end:i.index+t+n}),i.needsCalibrate&&n>i.len&&(t+=n-i.len)}),e},invalidValues(){if(this.inputIsEmpty)return[];if(!this.restrictedHourRange&&!this.minuteRangeList&&!this.secondRangeList&&this.opts.minuteInterval===1&&this.opts.secondInterval===1)return[];const e=[];return this.inUse.hour&&!this.isEmptyValue(this.hourType,this.hour)&&(!this.isValidValue(this.hourType,this.hour)||this.isDisabled("hour",this.hour))&&e.push("hour"),this.inUse.minute&&!this.isEmptyValue(this.minuteType,this.minute)&&(!this.isValidValue(this.minuteType,this.minute)||this.isDisabled("minute",this.minute)||this.notInInterval("minute",this.minute))&&e.push("minute"),this.inUse.second&&!this.isEmptyValue(this.secondType,this.second)&&(!this.isValidValue(this.secondType,this.second)||this.isDisabled("second",this.second)||this.notInInterval("second",this.second))&&e.push("second"),this.inUse.apm&&!this.isEmptyValue(this.apmType,this.apm)&&(!this.isValidValue(this.apmType,this.apm)||this.isDisabled("apm",this.apm))&&e.push("apm"),e.length?e:[]},hasInvalidInput(){return Boolean(this.invalidValues&&this.invalidValues.length)},autoDirectionEnabled(){return this.dropDirection==="auto"},dropdownDirClass(){return this.autoDirectionEnabled?this.forceDropOnTop?"drop-up":"drop-down":this.dropDirection==="up"?"drop-up":"drop-down"}},watch:{"opts.format"(e){this.renderFormat(e)},"opts.minuteInterval"(e){this.renderList("minute",e)},"opts.secondInterval"(e){this.renderList("second",e)},value:{deep:!0,handler(){this.readValues()}},displayTime(){this.fillValues()},disabled(e){e&&(this.isActive&&(this.isActive=!1),this.showDropdown&&(this.showDropdown=!1))},"invalidValues.length"(e,t){e&&e>=1?this.$emit("error",this.invalidValues):t&&t>=1&&this.$emit("error",[])}},methods:{formatValue(e,t){if(!this.isNumber(t))return"";switch(t=+t,e){case"H":case"h":case"k":case"m":case"s":return["h","k"].includes(e)&&t===0?e==="k"?"24":"12":String(t);case"HH":case"mm":case"ss":case"hh":case"kk":return["hh","kk"].includes(e)&&t===0?e==="kk"?"24":"12":t<10?`0${t}`:String(t);default:return""}},checkAcceptingType(e,t){if(!e||!t||!t.length)return"";for(let i=0;i<e.length;i++)if(t.indexOf(e[i])>-1)return e[i];return""},renderFormat(e){e=e||this.opts.format||N.format;let t=this.checkAcceptingType(R.HOUR_TOKENS,e),i=this.checkAcceptingType(R.MINUTE_TOKENS,e);this.secondType=this.checkAcceptingType(R.SECOND_TOKENS,e),this.apmType=this.checkAcceptingType(R.APM_TOKENS,e),!t&&!i&&!this.secondType&&!this.apmType&&(this.debugMode&&this.format&&this.debugLog(`No valid tokens found in your defined "format" string "${this.format}". Fallback to the default "HH:mm" format.`),t="HH",i="mm"),this.hourType=t,this.minuteType=i,this.hourType?this.renderHoursList():this.hours=[],this.minuteType?this.renderList("minute"):this.minutes=[],this.secondType?this.renderList("second"):this.seconds=[],this.apmType?this.renderApmList():this.apms=[],B(()=>{this.readValues()})},renderHoursList(){const e=this.baseOn12Hours?12:24,t=[];for(let i=0;i<e;i++)this.hourType==="k"||this.hourType==="kk"?t.push(this.formatValue(this.hourType,i+1)):t.push(this.formatValue(this.hourType,i));this.hours=t},renderList(e,t){if(!this.isMinuteOrSecond(e))return;const i=e==="minute";t=t||(i?this.opts.minuteInterval||N.minuteInterval:this.opts.secondInterval||N.secondInterval);const n=[];for(let l=0;l<60;l+=t)n.push(this.formatValue(i?this.minuteType:this.secondType,l));i?this.minutes=n:this.seconds=n},renderApmList(){this.apms=this.apmType==="A"?["AM","PM"]:["am","pm"]},readValues(){this.useStringValue?(this.debugMode&&this.debugLog(`Received a string value: "${this.modelValue}"`),this.readStringValues(this.modelValue)):(this.debugMode&&this.debugLog(`Received an object value: "${JSON.stringify(this.modelValue||{})}"`),this.readObjectValues(this.modelValue))},readObjectValues(e){const t=JSON.parse(JSON.stringify(e||{})),i=Object.keys(t);if(i.length===0){this.addFallbackValues();return}R.BASIC_TYPES.forEach(n=>{const l=this.getTokenByType(n);if(i.indexOf(l)>-1){const s=this.sanitizedValue(l,t[l]);this[n]=s,t[l]=s}else this[n]=""}),this.timeValue=t},getMatchAllByRegex(e,t){const i="polyfillTest";return Boolean(!i.matchAll||typeof i.matchAll!="function")?this.polyfillMatchAll(e,t):e.matchAll(new RegExp(t,"g"))},readStringValues(e){if(!e||!e.length){this.addFallbackValues();return}const t=String(this.formatString),i=`(${this.tokenRegexBase})+?`,n=`[^(${this.tokenRegexBase})]+`,l=this.getMatchAllByRegex(t,i),s=this.getMatchAllByRegex(t,n),a=[],r=[];for(let v of l){const x={index:v.index,token:v[0],isValueToken:!0};a.push(x),r.push(x)}for(let v of s)a.push({index:v.index,token:v[0]});a.sort((v,x)=>v.index<x.index?-1:1);let m="";if(a.forEach(v=>{if(v.isValueToken){const x=this.getTokenRegex(v.token)||"";m+=x}else{const x=v.token.replace(/\\{0}(\*|\?|\.|\+)/g,"\\$1");m+=`(?:${x})`}}),new RegExp(m).test(e)){const x=e.match(new RegExp(m)).slice(1,r.length+1),A={};if(x.forEach((H,L)=>{if(r[L]){const E=r[L].token;A[E]=this.setValueFromString(H,E)}}),this.timeValue=A,this.debugMode){const H=r.map(L=>L&&L.token);this.debugLog(`Successfully parsed values ${JSON.stringify(x)}
for ${JSON.stringify(H)}
in format pattern '${this.formatString}'`)}}else this.debugMode&&this.debugLog(`The input string in "v-model" does NOT match the "format" pattern
format: ${this.formatString}
v-model: ${e}`)},polyfillMatchAll(e,t){const i=e.match(new RegExp(t,"g")),n=[],l=[];return i&&i.length&&i.forEach(s=>{const a=l.findIndex(m=>m.str===s);let r;if(a>=0)l[a]&&l[a].regex&&(r=l[a].regex.exec(e).index);else{const m=new RegExp(s,"g");r=m.exec(e).index,l.push({str:String(s),regex:m})}n.push({0:String(s),index:r})}),n},addFallbackValues(){const e={};this.inUse.types.forEach(t=>{e[this.getTokenByType(t)]=""}),this.timeValue=e},setValueFromString(e,t){if(!t||!e)return"";const i=this.getTokenType(t);if(!i||!i.length)return"";const n=e!==this.getTokenByType(i)?e:"";return this[i]=n,n},fillValues(e){const t={},i=this.hour,n=this.hourType;let l;if(!n||!this.isNumber(i))R.HOUR_TOKENS.forEach(s=>t[s]=""),l=this.lowerCasedApm(this.apm||""),t.a=l,t.A=l.toUpperCase();else{const s=+i,a=this.baseOn12Hours&&this.apm?this.lowerCasedApm(this.apm):!1;R.HOUR_TOKENS.forEach(r=>{if(r===n){t[r]=i;return}let m,o;switch(r){case"H":case"HH":case"k":case"kk":this.baseOn12Hours?a==="pm"?m=s<12?s+12:s:["k","kk"].includes(r)?m=s===12?24:s:m=s%12:["k","kk"].includes(r)?m=s===0?24:s:m=s%24,t[r]=this.formatValue(r,m);break;case"h":case"hh":this.baseOn12Hours?(m=s,o=a||""):s>11&&s<24?(o="pm",m=s===12?12:s%12):(o="am",m=s%12===0?12:s),t[r]=this.formatValue(r,m),t.a=o,t.A=o.toUpperCase();break}})}t.m=this.formatValue("m",this.minute),t.mm=this.formatValue("mm",this.minute),t.s=this.formatValue("s",this.second),t.ss=this.formatValue("ss",this.second),this.fullValues=t,(!this.lazy||e)&&this.emitTimeValue(),this.closeOnComplete&&this.allValueSelected&&this.showDropdown&&this.toggleActive()},emitTimeValue(){if(!this.fullValues)return;if(this.lazy&&this.bakDisplayTime===this.displayTime){this.debugMode&&this.debugLog("The value does not change on `lazy` mode. Skip the emitting `input` and `change` event.");return}const e=JSON.parse(JSON.stringify(this.fullValues));if(this.useStringValue)this.$emit("update:modelValue",this.inputIsEmpty?"":String(this.displayTime));else{const t=this.inUse.tokens||[],i={};t.forEach(n=>{i[n]=e[n]||""}),this.$emit("update:modelValue",JSON.parse(JSON.stringify(i)))}this.$emit("change",{data:e,displayTime:this.inputIsEmpty?"":String(this.displayTime)})},translate12hRange(e){const t=this.match12hRange(e);return+t[1]==12?+t[1]+(t[2].toLowerCase()==="p"?0:12):+t[1]+(t[2].toLowerCase()==="p"?12:0)},isDisabled(e,t){if(!this.isBasicType(e)||!this.inUse[e])return!0;switch(e){case"hour":return this.isDisabledHour(t);case"minute":case"second":return this[`${e}RangeList`]?!this[`${e}RangeList`].includes(t):!1;case"apm":return this.restrictedHourRange?!this.has[this.lowerCasedApm(t)]:!1;default:return!0}},isDisabledHour(e){if(!this.restrictedHourRange)return!1;if(this.baseOn12Hours){if(!this.apm||!this.apm.length)return!1;{const t=this.apm.toLowerCase()==="am"?"a":"p";return!this.restrictedHourRange.includes(`${+e}${t}`)}}return(this.hourType==="HH"||this.hourType==="H")&&+e==0&&this.restrictedHourRange.includes(24)?!1:!this.restrictedHourRange.includes(+e)},notInInterval(e,t){if(!(!e||!this.isMinuteOrSecond(e)))return this.opts[`${e}Interval`]===1?!1:+t%this.opts[`${e}Interval`]!==0},renderRangeList(e,t){if(!e||!t||!this.isMinuteOrSecond(t))return[];const i=[];let n;if(e.forEach(l=>{if(l instanceof Array){l.length>2&&this.debugMode&&this.debugLog(`Nested array within "${t}-range" must contain no more than two items. Only the first two items of ${JSON.stringify(l)} will be taken into account.`);const s=l[0],a=l[1]||l[0];for(let r=+s;r<=+a;r++)r<0||r>59||(n=this.formatValue(this.getTokenByType(t),r),i.includes(n)||i.push(n))}else{if(+l<0||+l>59)return;n=this.formatValue(this.getTokenByType(t),l),i.includes(n)||i.push(n)}}),i.sort((l,s)=>l-s),this.debugMode){const s=((t==="minute"?this.minutes:this.seconds)||[]).filter(a=>i.includes(a));(!s||!s.length)&&(t==="minute"?this.debugLog(`The minute list is empty due to the "minute-range" config
minute-range: ${JSON.stringify(this.minuteRange)}
minute-interval: ${this.opts.minuteInterval}`):this.debugLog(`The second list is empty due to the "second-range" config
second-range: ${JSON.stringify(this.secondRange)}
second-interval: ${this.opts.secondInterval}`))}return i},forceApmSelection(){if(!this.manualInput&&this.apmType&&!this.apm&&(this.has.am||this.has.pm)){this.doClearApmChecking=!0;const e=this.has.am?"am":"pm";this.apm=this.apmType==="A"?e.toUpperCase():e}},emptyApmSelection(){this.doClearApmChecking&&this.hour===""&&this.minute===""&&this.second===""&&(this.apm=""),this.doClearApmChecking=!1},apmDisplayText(e){return this.amText&&this.lowerCasedApm(e)==="am"?this.amText:this.pmText&&this.lowerCasedApm(e)==="pm"?this.pmText:e},toggleActive(){this.disabled||(this.isActive=!this.isActive,this.isActive?(this.isFocusing=!0,this.manualInput&&this.$emit("focus"),this.opts.hideDropdown||this.setDropdownState(!0),this.lazy&&(this.bakDisplayTime=String(this.displayTime||"")),this.manualInput&&!this.inputIsEmpty&&B(()=>{this.$refs.input&&this.$refs.input.selectionStart===0&&this.$refs.input.selectionEnd===this.displayTime.length&&this.selectFirstSlot()})):(this.showDropdown?this.setDropdownState(!1):this.manualInput&&this.$emit("blur"),this.isFocusing=!1,this.lazy&&(this.fillValues(!0),this.bakDisplayTime=void 0)),this.restrictedHourRange&&this.baseOn12Hours&&(this.showDropdown?this.forceApmSelection():this.emptyApmSelection()),this.showDropdown&&this.checkForAutoScroll())},setDropdownState(e,t=!1){e?(this.keepFocusing(),this.autoDirectionEnabled&&this.checkDropDirection(),this.showDropdown=!0,this.$emit("open"),t&&(this.fixedDropdownButton&&(this.isActive=!0),this.$emit("blur"),this.checkForAutoScroll())):(this.showDropdown=!1,this.$emit("close"))},blurEvent(){this.manualInput&&!this.opts.hideDropdown&&this.$emit("blur")},select(e,t){this.isBasicType(e)&&!this.isDisabled(e,t)&&(this[e]=t,this.doClearApmChecking&&(this.doClearApmChecking=!1))},clearTime(){this.disabled||(this.hour="",this.minute="",this.second="",this.apm="",this.manualInput&&this.$refs&&this.$refs.input&&this.$refs.input.value.length&&(this.$refs.input.value=""),this.lazy&&this.fillValues(!0))},checkForAutoScroll(){this.inputIsEmpty||(this.autoScroll?B(()=>{this.scrollToSelectedValues()}):this.advancedKeyboard&&B(()=>{const e=this.inUse.types[0];this.scrollToSelected(e,!0)}))},scrollToSelected(e,t=!1){if(!this.timeValue||this.inputIsEmpty)return;const i=this.$el.querySelectorAll(`ul.${e}s`)[0];let n=this.activeItemInCol(e)[0];!n&&t&&(n=this.validItemsInCol(e)[0]),i&&n&&(i.scrollTop=n.offsetTop||0,this.advancedKeyboard&&n.focus())},scrollToSelectedValues(){!this.timeValue||this.inputIsEmpty||this.inUse.types.forEach(e=>{this.scrollToSelected(e)})},onFocus(){this.disabled||(this.isFocusing||(this.isFocusing=!0),this.isActive||this.toggleActive())},escBlur(){if(this.disabled)return;window.clearTimeout(this.debounceTimer),this.isFocusing=!1;const e=this.$el.querySelectorAll("input.vue__time-picker-input")[0];e&&e.blur()},debounceBlur(){this.disabled||(this.isFocusing=!1,window.clearTimeout(this.debounceTimer),this.debounceTimer=window.setTimeout(()=>{window.clearTimeout(this.debounceTimer),this.onBlur()},this.opts.blurDelay))},onBlur(){!this.disabled&&!this.isFocusing&&this.isActive&&this.toggleActive()},keepFocusing(){this.disabled||(window.clearTimeout(this.debounceTimer),this.isFocusing||(this.isFocusing=!0))},validItemsInCol(e){const t=`${e}s`;return this.$el.querySelectorAll(`ul.${t} > li:not(.hint):not([disabled])`)},activeItemInCol(e){const t=`${e}s`;return this.$el.querySelectorAll(`ul.${t} > li.active:not(.hint)`)},getClosestSibling(e,t,i=!1){const n=this.validItemsInCol(e),l=Array.prototype.findIndex.call(n,s=>s.getAttribute("data-key")===t);return i&&l===0?n[n.length-1]:!i&&l===n.length-1||l<0?n[0]:i?n[l-1]:n[l+1]},prevItem(e,t,i=!1){const n=this.getClosestSibling(e,t,!0);if(n)return i?n:n.focus()},nextItem(e,t,i=!1){const n=this.getClosestSibling(e,t,!1);if(n)return i?n:n.focus()},getSideColumnName(e,t=!1){const i=this.inUse.types.indexOf(e);if(t&&i<=0){this.debugMode&&this.debugLog("You're in the leftmost list already");return}else if(!t&&i===this.inUse.types.length-1){this.debugMode&&this.debugLog("You're in the rightmost list already");return}return this.inUse.types[t?i-1:i+1]},getFirstItemInSideColumn(e,t=!1){const i=this.getSideColumnName(e,t);if(!i)return;const n=this.validItemsInCol(i);if(n&&n[0])return n[0]},getActiveItemInSideColumn(e,t=!1){const i=this.getSideColumnName(e,t);if(!i)return;const n=this.activeItemInCol(i);if(n&&n[0])return n[0]},toLeftColumn(e){const t=this.getActiveItemInSideColumn(e,!0)||this.getFirstItemInSideColumn(e,!0);t&&t.focus()},toRightColumn(e){const t=this.getActiveItemInSideColumn(e,!1)||this.getFirstItemInSideColumn(e,!1);t&&t.focus()},onMouseDown(){this.manualInput&&(window.clearTimeout(this.selectionTimer),this.selectionTimer=window.setTimeout(()=>{if(window.clearTimeout(this.selectionTimer),this.$refs&&this.$refs.input){const e=this.getNearestChunkByPos(this.$refs.input.selectionStart||0);this.debounceSetInputSelection(e)}},50))},keyDownHandler(e){if(e.isComposing||e.keyCode===229)return e.preventDefault(),e.stopPropagation(),!1;e.keyCode>=48&&e.keyCode<=57||e.keyCode>=96&&e.keyCode<=105?(e.preventDefault(),this.keyboardInput(e.key)):[65,80,77].includes(e.keyCode)?(e.preventDefault(),this.keyboardInput(e.key,!0)):e.keyCode>=37&&e.keyCode<=40?(e.preventDefault(),this.clearKbInputLog(),this.arrowHandler(e)):e.keyCode===8||e.keyCode===46?(e.preventDefault(),this.clearKbInputLog(),this.clearTime()):e.keyCode===9?(this.clearKbInputLog(),this.tabHandler(e)):e.keyCode!==27&&!(e.metaKey||e.ctrlKey)&&e.preventDefault()},onCompostionStart(e){return e.preventDefault(),e.stopPropagation(),this.bakCurrentPos=this.getCurrentTokenChunk(),!1},onCompostionEnd(e){e.preventDefault(),e.stopPropagation();const t=e.data;let i=!1;return this.has.customApmText&&(i=this.isCustomApmText(t)),i&&this.setSanitizedValueToSection("apm",i),this.$refs.input.value=this.has.customApmText?this.customDisplayTime:this.displayTime,B(()=>{if(this.bakCurrentPos){const n=JSON.parse(JSON.stringify(this.bakCurrentPos));i&&(n.end=n.start+t.length),this.debounceSetInputSelection(n),this.bakCurrentPos=null}}),!1},pasteHandler(e){e.preventDefault();let t=(e.clipboardData||window.clipboardData).getData("text");this.debugMode&&this.debugLog(`Pasting value "${t}" from clipboard`),!(!t||!t.length)&&(this.has.customApmText&&(t=this.replaceCustomApmText(t)),this.inputIsEmpty?this.readStringValues(t):(this.kbInputLog=t.substr(-2,2),this.setKbInput(),this.debounceClearKbLog()))},arrowHandler(e){const t={37:"L",38:"U",39:"R",40:"D"}[e.keyCode];if(t==="U"||t==="D")if(this.inputIsEmpty)this.selectFirstValidValue();else{const i=this.getCurrentTokenChunk();if(!i){this.selectFirstValidValue();return}const n=i.type;this.getClosestValidItemInCol(n,this[n],t);const l=this.getCurrentTokenChunk();this.debounceSetInputSelection(l)}else t==="R"?this.toLateralToken(!1):t==="L"&&this.toLateralToken(!0)},tabHandler(e){if(!this.inputIsEmpty&&this.tokenChunksPos&&this.tokenChunksPos.length){const t=this.getCurrentTokenChunk();if(!t)return;const i=this.tokenChunksPos[0],n=this.tokenChunksPos[this.tokenChunksPos.length-1];(e.shiftKey&&t.token!==i.token||!e.shiftKey&&t.token!==n.token)&&(e.preventDefault(),this.toLateralToken(e.shiftKey))}},keyboardInput(e,t=!1){const i=this.getCurrentTokenChunk();!i||i.type!=="apm"&&t||i.type==="apm"&&!t||(this.kbInputLog=`${this.kbInputLog.substr(-1)}${e}`,this.setKbInput(),this.debounceClearKbLog())},clearKbInputLog(){window.clearTimeout(this.kbInputTimer),this.kbInputLog=""},debounceClearKbLog(){window.clearTimeout(this.kbInputTimer),this.kbInputTimer=window.setTimeout(()=>{this.clearKbInputLog()},this.opts.manualInputTimeout)},setKbInput(e){e=e||this.kbInputLog;const t=this.getCurrentTokenChunk();if(!t||!e||!e.length)return;const i=t.type,n=t.token;let l;if(i==="apm")this.lowerCasedApm(e).includes("a")?l="am":this.lowerCasedApm(e).includes("p")&&(l="pm"),l&&(l=n==="A"?l.toUpperCase():l);else if(this.isValidValue(n,e))l=e;else{const s=this.formatValue(n,e.substr(-1));this.isValidValue(n,s)&&(l=s)}if(l){this.setSanitizedValueToSection(i,l);const s=this.getCurrentTokenChunk();this.debounceSetInputSelection(s)}this.debugMode&&(l?this.debugLog(`Successfully set value "${l}" from latest input "${e}" for the "${i}" slot`):this.debugLog(`Value "${e}" is invalid in the "${i}" slot`))},onChange(){if(!this.manualInput||!this.$refs||!this.$refs.input)return;const e=this.$refs.input.value||"";e&&e.length&&this.readStringValues(e)},getNearestChunkByPos(e){if(!this.tokenChunksPos||!this.tokenChunksPos.length)return;let t,i=-1;for(let n=0;n<this.tokenChunksPos.length;n++){const l=JSON.parse(JSON.stringify(this.tokenChunksPos[n]));if(l.start===e)return l;const s=Math.abs(l.start-e);if(i<0)t=l,i=s;else{if(i<=s)return t;i=s,t=l}}return t},selectFirstValidValue(){if(!this.tokenChunksPos||!this.tokenChunksPos.length)return;const e=this.tokenChunksPos[0].type;e==="hour"?this.getClosestHourItem():this.getClosestValidItemInCol(e,this[e]),this.selectFirstSlot()},getClosestHourItem(e,t="U"){if(!this.validHoursList||!this.validHoursList.length){this.debugMode&&this.debugLog(`No valid hour values found, please check your "hour-range" config
hour-range: ${JSON.stringify(this.hourRange)}`);return}if(!e){this.setManualHour(this.validHoursList[0]);return}const i=this.validHoursList.findIndex(s=>{if(this.baseOn12Hours){const a=`${e}${this.lowerCasedApm(this.apm)==="pm"?"p":"a"}`;return s===a}else return s===e});let n;i===-1?n=0:t==="D"?n=i===0?this.validHoursList.length-1:i-1:n=(i+1)%this.validHoursList.length;const l=this.validHoursList[n];this.setManualHour(l)},getClosestValidItemInCol(e,t,i="U"){if(e==="hour")this.getClosestHourItem(t,i);else{const n=i==="D"?this.prevItem(e,this[e],!0):this.nextItem(e,this[e],!0);n&&this.select(e,n.getAttribute("data-key"))}},setSanitizedValueToSection(e,t){if(!e||!this.getTokenByType(e))return;const i=this.sanitizedValue(this.getTokenByType(e),t);this[e]=i},setManualHour(e){if(this.is12hRange(e)){const t=this.match12hRange(e),i=t[2]==="a"?"AM":"PM";this.setSanitizedValueToSection("apm",this.apmType==="a"?i.toLowerCase():i),this.setSanitizedValueToSection("hour",t[1])}else this.setSanitizedValueToSection("hour",e)},debounceSetInputSelection({start:e=0,end:t=0}){B(()=>{this.setInputSelectionRange(e,t)}),window.clearTimeout(this.selectionTimer),this.selectionTimer=window.setTimeout(()=>{window.clearTimeout(this.selectionTimer),this.$refs.input&&(this.$refs.input.selectionStart!==e||this.$refs.input.selectionEnd!==t)&&this.setInputSelectionRange(e,t)},30)},setInputSelectionRange(e,t){this.$refs&&this.$refs.input&&this.$refs.input.setSelectionRange(e,t)},getCurrentTokenChunk(){return this.getNearestChunkByPos(this.$refs.input&&this.$refs.input.selectionStart||0)},selectFirstSlot(){const e=this.getNearestChunkByPos(0);this.debounceSetInputSelection(e)},toLateralToken(e){const t=this.getCurrentTokenChunk();if(!t){this.selectFirstValidValue();return}const i=this.tokenChunksPos.findIndex(l=>l.token===t.token);if(!e&&i>=this.tokenChunksPos.length-1||e&&i===0){this.debugMode&&(e?this.debugLog("You're in the leftmost slot already"):this.debugLog("You're in the rightmost slot already"));return}const n=e?this.tokenChunksPos[i-1]:this.tokenChunksPos[i+1];this.debounceSetInputSelection(n)},isCustomApmText(e){return!e||!e.length?!1:this.amText&&this.amText===e?this.apmType==="A"?"AM":"am":this.pmText&&this.pmText===e?this.apmType==="A"?"PM":"pm":!1},replaceCustomApmText(e){return this.amText&&this.amText.length&&e.includes(this.amText)?e.replace(new RegExp(this.amText,"g"),this.apmType==="A"?"AM":"am"):this.pmText&&this.pmText.length&&e.includes(this.pmText)?e.replace(new RegExp(this.pmText,"g"),this.apmType==="A"?"PM":"pm"):e},checkDropDirection(){if(!this.$el)return;let e;this.containerId&&this.containerId.length&&(e=document.getElementById(this.containerId),!e&&this.debugMode&&this.debugLog(`Container with id "${this.containerId}" not found. Fallback to document body.`));const t=this.$el;let i;e&&e.offsetHeight?i=e.offsetTop+e.offsetHeight-(t.offsetTop+t.offsetHeight):i=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight)-(t.offsetTop+t.offsetHeight),this.forceDropOnTop=this.opts.dropOffsetHeight>i},is12hRange(e){return/^\d{1,2}(a|p|A|P)$/.test(e)},match12hRange(e){return e.match(/^(\d{1,2})(a|p|A|P)$/)},isNumber(e){return!isNaN(parseFloat(e))&&isFinite(e)},isBasicType(e){return R.BASIC_TYPES.includes(e)},lowerCasedApm(e){return(e||"").toLowerCase()},getTokenRegex(e){switch(e){case"HH":return"([01][0-9]|2[0-3]|H{2})";case"H":return"([0-9]{1}|1[0-9]|2[0-3]|H{1})";case"hh":return"(0[1-9]|1[0-2]|h{2})";case"h":return"([1-9]{1}|1[0-2]|h{1})";case"kk":return"(0[1-9]|1[0-9]|2[0-4]|k{2})";case"k":return"([1-9]{1}|1[0-9]|2[0-4]|k{1})";case"mm":return"([0-5][0-9]|m{2})";case"ss":return"([0-5][0-9]|s{2})";case"m":return"([0-9]{1}|[1-5][0-9]|m{1})";case"s":return"([0-9]{1}|[1-5][0-9]|s{1})";case"A":return"(AM|PM|A{1})";case"a":return"(am|pm|a{1})";default:return""}},isEmptyValue(e,t){return!t||!t.length||t&&t===e},isValidValue(e,t){if(!e||this.isEmptyValue(e,t))return!1;const i=this.getTokenRegex(e);return!i||!i.length?!1:new RegExp(`^${i}$`).test(t)},sanitizedValue(e,t){return this.isValidValue(e,t)?t:""},getTokenType(e){return this.inUse.types[this.inUse.tokens.indexOf(e)]||""},getTokenByType(e){return this[`${e}Type`]||""},isMinuteOrSecond(e){return["minute","second"].includes(e)},booleanAttr(e=!1){return e?!0:null},debugLog(e){if(!e||!e.length)return;let t="";if(this.id&&(t+=`#${this.id}`),this.name&&(t+=`[name=${this.name}]`),this.inputClass){let n=[];typeof this.inputClass=="string"?n=this.inputClass.split(/\s/g):Array.isArray(this.inputClass)?n=[].concat([],this.inputClass):typeof this.inputClass=="object"&&Object.keys(this.inputClass).forEach(l=>{this.inputClass[l]&&n.push(l)});for(let l of n)l&&l.trim().length&&(t+=`.${l.trim()}`)}const i=`DEBUG: ${e}${t?`
	(${t})`:""}`;window.console.debug&&typeof window.console.debug=="function"?window.console.debug(i):window.console.log(i)}},mounted(){window.clearTimeout(this.debounceTimer),window.clearTimeout(this.selectionTimer),window.clearTimeout(this.kbInputTimer),this.renderFormat()},beforeUnmount(){window.clearTimeout(this.debounceTimer),window.clearTimeout(this.selectionTimer),window.clearTimeout(this.kbInputTimer)}};const ne={key:0,class:"controls",tabindex:"-1"},re=u("span",{class:"char"},"×",-1),le=u("span",{class:"char"},"▾",-1),oe={key:1,class:"custom-icon"};function ae(e,t,i,n,l,s){return h(),d("span",{class:"vue__time-picker",style:s.inputWidthStyle},[u("input",{type:"text",class:["vue__time-picker-input",[i.inputClass,{"is-empty":s.inputIsEmpty,invalid:s.hasInvalidInput,"all-selected":s.allValueSelected,disabled:i.disabled,"has-custom-icon":e.$slots&&e.$slots.icon}]],ref:"input",style:s.inputWidthStyle,id:i.id,name:i.name,value:s.inputIsEmpty?null:s.customDisplayTime,placeholder:i.placeholder?i.placeholder:s.formatString,tabindex:i.disabled?-1:i.tabindex,disabled:s.booleanAttr(i.disabled),readonly:s.booleanAttr(!i.manualInput),autocomplete:i.autocomplete,onFocus:t[1]||(t[1]=(...a)=>s.onFocus(...a)),onChange:t[2]||(t[2]=(...a)=>s.onChange(...a)),onBlur:t[3]||(t[3]=a=>{s.debounceBlur(),s.blurEvent()}),onMousedown:t[4]||(t[4]=(...a)=>s.onMouseDown(...a)),onKeydown:[t[5]||(t[5]=(...a)=>s.keyDownHandler(...a)),t[9]||(t[9]=g(p((...a)=>s.escBlur(...a),["exact"]),["esc"]))],onCompositionstart:t[6]||(t[6]=(...a)=>s.onCompostionStart(...a)),onCompositionend:t[7]||(t[7]=(...a)=>s.onCompostionEnd(...a)),onPaste:t[8]||(t[8]=(...a)=>s.pasteHandler(...a))},null,46,["id","name","value","placeholder","tabindex","disabled","readonly","autocomplete"]),s.showClearBtn||s.showDropdownBtn?(h(),d("div",ne,[!l.isActive&&s.showClearBtn?(h(),d("span",{key:0,class:["clear-btn",{"has-custom-btn":e.$slots&&e.$slots.clearButton}],tabindex:"-1",onClick:t[10]||(t[10]=(...a)=>s.clearTime(...a))},[U(e.$slots,"clearButton",{},()=>[re])],2)):y("v-if",!0),s.showDropdownBtn?(h(),d("span",{key:1,class:["dropdown-btn",{"has-custom-btn":e.$slots&&e.$slots.dropdownButton}],tabindex:"-1",onClick:t[11]||(t[11]=a=>s.setDropdownState(i.fixedDropdownButton?!l.showDropdown:!0,!0)),onMousedown:t[12]||(t[12]=(...a)=>s.keepFocusing(...a))},[U(e.$slots,"dropdownButton",{},()=>[le])],34)):y("v-if",!0)])):y("v-if",!0),e.$slots&&e.$slots.icon?(h(),d("div",oe,[U(e.$slots,"icon")])):y("v-if",!0),l.showDropdown?(h(),d("div",{key:2,class:"time-picker-overlay",onClick:t[13]||(t[13]=(...a)=>s.toggleActive(...a)),tabindex:"-1"})):y("v-if",!0),w(u("div",{class:["dropdown",[s.dropdownDirClass]],tabindex:"-1",style:s.inputWidthStyle,onMouseup:t[42]||(t[42]=(...a)=>s.keepFocusing(...a)),onClick:t[43]||(t[43]=p(()=>{},["stop"]))},[u("div",{class:"select-list",style:s.inputWidthStyle,tabindex:"-1"},[y(" Common Keyboard Support: less event listeners "),i.advancedKeyboard?y("v-if",!0):(h(!0),d(k,{key:0},V(s.columnsSequence,a=>(h(),d(k,{key:a},[a==="hour"?(h(),d("ul",{key:0,class:"hours",onScroll:t[14]||(t[14]=(...r)=>s.keepFocusing(...r))},[u("li",{class:"hint",textContent:b(s.hourLabelText)},null,8,["textContent"]),(h(!0),d(k,null,V(l.hours,(r,m)=>(h(),d(k,{key:m},[!s.opts.hideDisabledHours||s.opts.hideDisabledHours&&!s.isDisabled("hour",r)?(h(),d("li",{key:0,class:{active:l.hour===r},disabled:s.booleanAttr(s.isDisabled("hour",r)),"data-key":r,textContent:b(r),onClick:o=>s.select("hour",r)},null,10,["disabled","data-key","textContent","onClick"])):y("v-if",!0)],64))),128))],32)):y("v-if",!0),a==="minute"?(h(),d("ul",{key:1,class:"minutes",onScroll:t[15]||(t[15]=(...r)=>s.keepFocusing(...r))},[u("li",{class:"hint",textContent:b(s.minuteLabelText)},null,8,["textContent"]),(h(!0),d(k,null,V(l.minutes,(r,m)=>(h(),d(k,{key:m},[!s.opts.hideDisabledMinutes||s.opts.hideDisabledMinutes&&!s.isDisabled("minute",r)?(h(),d("li",{key:0,class:{active:l.minute===r},disabled:s.booleanAttr(s.isDisabled("minute",r)),"data-key":r,textContent:b(r),onClick:o=>s.select("minute",r)},null,10,["disabled","data-key","textContent","onClick"])):y("v-if",!0)],64))),128))],32)):y("v-if",!0),a==="second"?(h(),d("ul",{key:2,class:"seconds",onScroll:t[16]||(t[16]=(...r)=>s.keepFocusing(...r))},[u("li",{class:"hint",textContent:b(s.secondLabelText)},null,8,["textContent"]),(h(!0),d(k,null,V(l.seconds,(r,m)=>(h(),d(k,{key:m},[!s.opts.hideDisabledSeconds||s.opts.hideDisabledSeconds&&!s.isDisabled("second",r)?(h(),d("li",{key:0,class:{active:l.second===r},disabled:s.booleanAttr(s.isDisabled("second",r)),"data-key":r,textContent:b(r),onClick:o=>s.select("second",r)},null,10,["disabled","data-key","textContent","onClick"])):y("v-if",!0)],64))),128))],32)):y("v-if",!0),a==="apm"?(h(),d("ul",{key:3,class:"apms",onScroll:t[17]||(t[17]=(...r)=>s.keepFocusing(...r))},[u("li",{class:"hint",textContent:b(s.apmLabelText)},null,8,["textContent"]),(h(!0),d(k,null,V(l.apms,(r,m)=>(h(),d(k,{key:m},[!s.opts.hideDisabledHours||s.opts.hideDisabledHours&&!s.isDisabled("apm",r)?(h(),d("li",{key:0,class:{active:l.apm===r},disabled:s.booleanAttr(s.isDisabled("apm",r)),"data-key":r,textContent:b(s.apmDisplayText(r)),onClick:o=>s.select("apm",r)},null,10,["disabled","data-key","textContent","onClick"])):y("v-if",!0)],64))),128))],32)):y("v-if",!0)],64))),128)),y(" / Common Keyboard Support "),y(`
        Advanced Keyboard Support
        Addeds hundreds of additional event lisenters
      `),i.advancedKeyboard?(h(!0),d(k,{key:1},V(s.columnsSequence,a=>(h(),d(k,{key:a},[a==="hour"?(h(),d("ul",{key:0,class:"hours",tabindex:"-1",onScroll:t[23]||(t[23]=(...r)=>s.keepFocusing(...r))},[u("li",{class:"hint",textContent:b(s.hourLabelText),tabindex:"-1"},null,8,["textContent"]),(h(!0),d(k,null,V(l.hours,(r,m)=>(h(),d(k,{key:m},[!s.opts.hideDisabledHours||s.opts.hideDisabledHours&&!s.isDisabled("hour",r)?(h(),d("li",{key:0,class:{active:l.hour===r},tabindex:s.isDisabled("hour",r)?-1:i.tabindex,"data-key":r,disabled:s.booleanAttr(s.isDisabled("hour",r)),textContent:b(r),onClick:o=>s.select("hour",r),onKeydown:[g(p(o=>s.select("hour",r),["prevent"]),["space"]),g(p(o=>s.select("hour",r),["prevent"]),["enter"]),g(p(o=>s.prevItem("hour",r),["prevent"]),["up"]),g(p(o=>s.nextItem("hour",r),["prevent"]),["down"]),t[18]||(t[18]=g(p(o=>s.toLeftColumn("hour"),["prevent"]),["left"])),t[19]||(t[19]=g(p(o=>s.toRightColumn("hour"),["prevent"]),["right"])),t[20]||(t[20]=g(p((...o)=>s.debounceBlur(...o),["exact"]),["esc"]))],onBlur:t[21]||(t[21]=(...o)=>s.debounceBlur(...o)),onFocus:t[22]||(t[22]=(...o)=>s.keepFocusing(...o))},null,42,["tabindex","data-key","disabled","textContent","onClick","onKeydown"])):y("v-if",!0)],64))),128))],32)):y("v-if",!0),a==="minute"?(h(),d("ul",{key:1,class:"minutes",tabindex:"-1",onScroll:t[29]||(t[29]=(...r)=>s.keepFocusing(...r))},[u("li",{class:"hint",textContent:b(s.minuteLabelText),tabindex:"-1"},null,8,["textContent"]),(h(!0),d(k,null,V(l.minutes,(r,m)=>(h(),d(k,{key:m},[!s.opts.hideDisabledMinutes||s.opts.hideDisabledMinutes&&!s.isDisabled("minute",r)?(h(),d("li",{key:0,class:{active:l.minute===r},tabindex:s.isDisabled("minute",r)?-1:i.tabindex,"data-key":r,disabled:s.booleanAttr(s.isDisabled("minute",r)),textContent:b(r),onClick:o=>s.select("minute",r),onKeydown:[g(p(o=>s.select("minute",r),["prevent"]),["space"]),g(p(o=>s.select("minute",r),["prevent"]),["enter"]),g(p(o=>s.prevItem("minute",r),["prevent"]),["up"]),g(p(o=>s.nextItem("minute",r),["prevent"]),["down"]),t[24]||(t[24]=g(p(o=>s.toLeftColumn("minute"),["prevent"]),["left"])),t[25]||(t[25]=g(p(o=>s.toRightColumn("minute"),["prevent"]),["right"])),t[26]||(t[26]=g(p((...o)=>s.debounceBlur(...o),["exact"]),["esc"]))],onBlur:t[27]||(t[27]=(...o)=>s.debounceBlur(...o)),onFocus:t[28]||(t[28]=(...o)=>s.keepFocusing(...o))},null,42,["tabindex","data-key","disabled","textContent","onClick","onKeydown"])):y("v-if",!0)],64))),128))],32)):y("v-if",!0),a==="second"?(h(),d("ul",{key:2,class:"seconds",tabindex:"-1",onScroll:t[35]||(t[35]=(...r)=>s.keepFocusing(...r))},[u("li",{class:"hint",textContent:b(s.secondLabelText),tabindex:"-1"},null,8,["textContent"]),(h(!0),d(k,null,V(l.seconds,(r,m)=>(h(),d(k,{key:m},[!s.opts.hideDisabledSeconds||s.opts.hideDisabledSeconds&&!s.isDisabled("second",r)?(h(),d("li",{key:0,class:{active:l.second===r},tabindex:s.isDisabled("second",r)?-1:i.tabindex,"data-key":r,disabled:s.booleanAttr(s.isDisabled("second",r)),textContent:b(r),onClick:o=>s.select("second",r),onKeydown:[g(p(o=>s.select("second",r),["prevent"]),["space"]),g(p(o=>s.select("second",r),["prevent"]),["enter"]),g(p(o=>s.prevItem("second",r),["prevent"]),["up"]),g(p(o=>s.nextItem("second",r),["prevent"]),["down"]),t[30]||(t[30]=g(p(o=>s.toLeftColumn("second"),["prevent"]),["left"])),t[31]||(t[31]=g(p(o=>s.toRightColumn("second"),["prevent"]),["right"])),t[32]||(t[32]=g(p((...o)=>s.debounceBlur(...o),["exact"]),["esc"]))],onBlur:t[33]||(t[33]=(...o)=>s.debounceBlur(...o)),onFocus:t[34]||(t[34]=(...o)=>s.keepFocusing(...o))},null,42,["tabindex","data-key","disabled","textContent","onClick","onKeydown"])):y("v-if",!0)],64))),128))],32)):y("v-if",!0),a==="apm"?(h(),d("ul",{key:3,class:"apms",tabindex:"-1",onScroll:t[41]||(t[41]=(...r)=>s.keepFocusing(...r))},[u("li",{class:"hint",textContent:b(s.apmLabelText),tabindex:"-1"},null,8,["textContent"]),(h(!0),d(k,null,V(l.apms,(r,m)=>(h(),d(k,{key:m},[!s.opts.hideDisabledHours||s.opts.hideDisabledHours&&!s.isDisabled("apm",r)?(h(),d("li",{key:0,class:{active:l.apm===r},tabindex:s.isDisabled("apm",r)?-1:i.tabindex,"data-key":r,disabled:s.booleanAttr(s.isDisabled("apm",r)),textContent:b(s.apmDisplayText(r)),onClick:o=>s.select("apm",r),onKeydown:[g(p(o=>s.select("apm",r),["prevent"]),["space"]),g(p(o=>s.select("apm",r),["prevent"]),["enter"]),g(p(o=>s.prevItem("apm",r),["prevent"]),["up"]),g(p(o=>s.nextItem("apm",r),["prevent"]),["down"]),t[36]||(t[36]=g(p(o=>s.toLeftColumn("apm"),["prevent"]),["left"])),t[37]||(t[37]=g(p(o=>s.toRightColumn("apm"),["prevent"]),["right"])),t[38]||(t[38]=g(p((...o)=>s.debounceBlur(...o),["exact"]),["esc"]))],onBlur:t[39]||(t[39]=(...o)=>s.debounceBlur(...o)),onFocus:t[40]||(t[40]=(...o)=>s.keepFocusing(...o))},null,42,["tabindex","data-key","disabled","textContent","onClick","onKeydown"])):y("v-if",!0)],64))),128))],32)):y("v-if",!0)],64))),128)):y("v-if",!0),y(" / Advanced Keyboard Support ")],4)],38),[[D,l.showDropdown]])],4)}J.render=ae;J.__file="src/VueTimepicker.vue";const ue={components:{VueTimepicker:J},data(){return{selectedCompany:this.$store.getters["authModule/getCurrentCompany"].company._id,negotiationStatuses:[]}},computed:{...$({companies:e=>e.authModule.companies})},mounted(){this.initialize()},watch:{selectedCompany(){this.initialize()}},methods:{async initialize(){await Promise.all([this.$store.dispatch("negotiationStatusesModule/list",{sort:"createdAt",order:"asc",company:this.selectedCompany})]),this.negotiationStatuses=JSON.parse(JSON.stringify(this.$store.state.negotiationStatusesModule.negotiationStatuses));for(const e of this.negotiationStatuses){e.isEditing=!1;for(const t of e.automations)t.afterTimeFormatted=j(t.afterTime)}},async save(e,t){e.isEditing=!1;for(const i of e.automations){let[n,l,s]=i.afterTimeFormatted.split(":");i.afterTime=n*60*60*1e3+l*60*1e3+s*1e3}e._id?await this.$store.dispatch("negotiationStatusesModule/update",{id:e._id,data:e}):(e.company=this.selectedCompany,this.negotiationStatuses[t]=await this.$store.dispatch("negotiationStatusesModule/create",{...e}));for(const i of this.negotiationStatuses){i.isEditing=!1;for(const n of i.automations)n.afterTimeFormatted=j(n.afterTime)}},addAutomation(e){e.automations.push({name:"Nuevo mensaje",message:"Nuevo mensaje",afterTime:0,afterTimeFormatted:"00:00:00"})},addNegotiationStatus(e){e.unshift({isEditing:!0,name:"Nuevo estado",automations:[{name:"Nuevo mensaje",message:"Nuevo mensaje",afterTime:0,afterTimeFormatted:"00:00:00"}]})},deletes(e,t){e[t]._id&&this.$store.dispatch("negotiationStatusesModule/delete",e[t]._id),e.splice(t,1)},toggleCompany(e){if(this.selectedCompany===e.company._id)return this.selectedCompany=null;this.selectedCompany=e.company._id}}},O=e=>(te("data-v-42917b9f"),e=e(),se(),e),he={class:"d-flex justify-space-evenly"},de=["src"],me=O(()=>I("div",{class:"d-flex align-items-center mb-4"},[I("div",{class:"col-md-6 pl-0"},[I("p",{class:"etiqueta"},"Desde:"),I("input",{type:"time",value:"",class:"mb-0"})]),I("div",{class:"col-md-6 pr-0"},[I("p",{class:"etiqueta"},"Hasta:"),I("input",{type:"time",value:"",class:"mb-0"})])],-1)),ce=O(()=>I("b",null,"Después de",-1)),fe=O(()=>I("b",null,"Cambiar a estado",-1)),pe=O(()=>I("b",null,"Se activará después de",-1)),ge={class:"ml-2"},ye=O(()=>I("i",{class:"mr-2 mdi text-h5 mdi-clock-start"},null,-1));function be(e,t,i,n,l,s){const a=C("v-tooltip"),r=C("v-btn"),m=C("v-card-title"),o=C("v-card-header-text"),v=C("v-container"),x=C("v-card"),A=C("v-col"),H=C("v-row"),L=C("v-text-field"),E=C("v-divider"),z=C("v-select"),P=C("v-card-text"),q=C("vue-timepicker"),W=C("v-card-subtitle"),Y=C("v-card-header"),G=C("v-textarea"),Q=C("v-icon"),X=C("v-spacer"),Z=C("v-card-actions");return h(),d(v,{fluid:""},{default:c(()=>[u(H,{class:"mb-3"},{default:c(()=>[I("div",he,[(h(!0),K(k,null,V(e.companies,(f,_)=>(h(),d(r,{small:"",icon:"",color:"white",onClick:T=>s.toggleCompany(f),class:ee({selected:l.selectedCompany===f.company._id}),key:_},{default:c(()=>[I("img",{style:{width:"25px"},src:f.company.iconUrl},null,8,de),u(a,{activator:"parent",anchor:"bottom"},{default:c(()=>[S(b(f.company.name),1)]),_:2},1024)]),_:2},1032,["onClick","class"]))),128))]),u(A,{cols:"12",sm:"12"},{default:c(()=>[u(x,{class:"mb-3 mr-3 pa-3"},{default:c(()=>[u(o,null,{default:c(()=>[u(m,null,{default:c(()=>[S(" Horario hábil ")]),_:1})]),_:1}),u(v,{fluid:""},{default:c(()=>[me]),_:1})]),_:1})]),_:1})]),_:1}),u(H,{class:"mb-3"},{default:c(()=>[u(A,{cols:"12",sm:"12"},{default:c(()=>[u(r,{onClick:t[0]||(t[0]=f=>s.addNegotiationStatus(l.negotiationStatuses)),color:"success"},{default:c(()=>[S(" Nuevo "),u(a,{activator:"parent",anchor:"bottom"},{default:c(()=>[S(" Nuevo estado de negociación ")]),_:1})]),_:1})]),_:1})]),_:1}),u(H,null,{default:c(()=>[(h(!0),K(k,null,V(l.negotiationStatuses,(f,_)=>(h(),d(A,{cols:"12",sm:"4",key:f._id},{default:c(()=>[u(x,{class:"mb-3 mr-3"},{default:c(()=>[u(o,null,{default:c(()=>[u(m,null,{default:c(()=>[w(I("h5",null,b(f.name),513),[[D,!f.isEditing]]),w(u(L,{density:"compact","hide-details":"",variant:"outlined",modelValue:f.name,"onUpdate:modelValue":T=>f.name=T,class:"mb-2"},null,8,["modelValue","onUpdate:modelValue"]),[[D,f.isEditing]])]),_:2},1024)]),_:2},1024),u(E),u(v,{fluid:""},{default:c(()=>[ce,w(u(z,{items:[{value:1,label:"1 día"},{value:2,label:"2 días"},{value:3,label:"3 días"},{value:4,label:"4 días"}],modelValue:f.daysToNextStatus,"onUpdate:modelValue":T=>f.daysToNextStatus=T,"item-title":"label","item-value":"value",placeholder:"x dias",density:"compact"},null,8,["modelValue","onUpdate:modelValue"]),[[D,f.isEditing]]),w(u(P,null,{default:c(()=>[S(b(f.daysToNextStatus?`${f.daysToNextStatus} días`:"Sin selección"),1)]),_:2},1536),[[D,!f.isEditing]]),fe,w(u(z,{items:[...l.negotiationStatuses],clearable:"",modelValue:f.nextNegotiationStatusId,"onUpdate:modelValue":T=>f.nextNegotiationStatusId=T,"item-title":"name","item-value":"_id",placeholder:"Sin siguiente estado",density:"compact"},null,8,["items","modelValue","onUpdate:modelValue"]),[[D,f.isEditing]]),w(u(P,null,{default:c(()=>{var T;return[S(b(f.nextNegotiationStatusId?(T=l.negotiationStatuses.find(M=>M._id==f.nextNegotiationStatusId))==null?void 0:T.name:"Sin estado"),1)]}),_:2},1536),[[D,!f.isEditing]]),u(E,{class:"mb-3"}),(h(!0),K(k,null,V(f.automations,(T,M)=>(h(),d(x,{class:"mb-2",key:T._id},{default:c(()=>[u(Y,null,{default:c(()=>[u(o,null,{default:c(()=>[u(A,{cols:"12",sm:"12",md:"12"},{default:c(()=>[u(H,null,{default:c(()=>[u(A,{cols:"12",sm:"10"},{default:c(()=>[I("h5",null,"Mensaje "+b(M+1),1)]),_:2},1024),w(u(A,{cols:"12",sm:"2"},{default:c(()=>[u(r,{small:"",variant:"text",color:"error",onClick:F=>f.automations.splice(M,1)},{default:c(()=>[S("Borrar")]),_:2},1032,["onClick"])]),_:2},1536),[[D,f.isEditing]])]),_:2},1024),u(E),u(A,{cols:"12",sm:"12"},{default:c(()=>[pe,w(u(q,{class:"ml-2",format:"HH:mm:ss",modelValue:T.afterTimeFormatted,"onUpdate:modelValue":F=>T.afterTimeFormatted=F},null,8,["modelValue","onUpdate:modelValue"]),[[D,f.isEditing]]),w(I("span",ge,[ye,S(" "+b(T.afterTimeFormatted),1)],512),[[D,!f.isEditing]])]),_:2},1024)]),_:2},1024),u(W,null,{default:c(()=>[S(b(T.name),1)]),_:2},1024)]),_:2},1024)]),_:2},1024),w(u(P,null,{default:c(()=>[S(b(T.message),1)]),_:2},1536),[[D,!f.isEditing]]),w(u(G,{class:"ma-2",modelValue:T.message,"onUpdate:modelValue":F=>T.message=F,rows:"2",variant:"outlined"},null,8,["modelValue","onUpdate:modelValue"]),[[D,f.isEditing]])]),_:2},1024))),128)),w(u(r,{onClick:T=>s.addAutomation(f),small:"",icon:"",color:"success"},{default:c(()=>[u(Q,{class:"wechat-color"},{default:c(()=>[S("mdi-plus-box")]),_:1}),u(a,{activator:"parent",anchor:"bottom"},{default:c(()=>[S(" Agregar ")]),_:1})]),_:2},1032,["onClick"]),[[D,f.isEditing]])]),_:2},1024),u(Z,null,{default:c(()=>[u(X),w(u(r,{onClick:T=>s.save(f,_),color:"success"},{default:c(()=>[S("Guardar")]),_:2},1032,["onClick"]),[[D,f.isEditing]]),w(u(r,{onClick:T=>f.isEditing=!0,color:"info"},{default:c(()=>[S("Editar")]),_:2},1032,["onClick"]),[[D,!f.isEditing]]),u(r,{color:"error",onClick:T=>s.deletes(l.negotiationStatuses,_)},{default:c(()=>[S("Borrar")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})}const Ce=ie(ue,[["render",be],["__scopeId","data-v-42917b9f"]]);export{Ce as default};
