import{aX as D,o as u,c as h,a as d,aV as f,am as B,L as g,af as S,ag as v,F as b,v as C,y as k,J as c,aE as P,s as O,w as p,V as U,b as V,g as A,h as I,aO as K,e as M,n as J,d as z,ap as W,f as E,j as Y,T as j,aY as q,ab as G,aU as X,l as Z,aZ as Q,M as _}from"./index.8416b2a4.js";import{_ as $}from"./plugin-vue_export-helper.21dcd24c.js";const x={HOUR_TOKENS:["HH","H","hh","h","kk","k"],MINUTE_TOKENS:["mm","m"],SECOND_TOKENS:["ss","s"],APM_TOKENS:["A","a"],BASIC_TYPES:["hour","minute","second","apm"]},L={format:"HH:mm",minuteInterval:1,secondInterval:1,hourRange:null,minuteRange:null,secondRange:null,hideDisabledHours:!1,hideDisabledMinutes:!1,hideDisabledSeconds:!1,hideDisabledItems:!1,advancedKeyboard:!1,hideDropdown:!1,blurDelay:300,manualInputTimeout:1e3,dropOffsetHeight:160};var N={name:"VueTimepicker",props:{modelValue:{type:[Object,String]},format:{type:String},minuteInterval:{type:[Number,String]},secondInterval:{type:[Number,String]},hourRange:{type:Array},minuteRange:{type:Array},secondRange:{type:Array},hideDisabledHours:{type:Boolean,default:!1},hideDisabledMinutes:{type:Boolean,default:!1},hideDisabledSeconds:{type:Boolean,default:!1},hideDisabledItems:{type:Boolean,default:!1},hideClearButton:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},closeOnComplete:{type:Boolean,default:!1},id:{type:String},name:{type:String},inputClass:{type:[String,Object,Array]},placeholder:{type:String},tabindex:{type:[Number,String],default:0},inputWidth:{type:String},autocomplete:{type:String,default:"off"},hourLabel:{type:String},minuteLabel:{type:String},secondLabel:{type:String},apmLabel:{type:String},amText:{type:String},pmText:{type:String},blurDelay:{type:[Number,String]},advancedKeyboard:{type:Boolean,default:!1},lazy:{type:Boolean,default:!1},autoScroll:{type:Boolean,default:!1},dropDirection:{type:String,default:"down"},dropOffsetHeight:{type:[Number,String]},containerId:{type:String},manualInput:{type:Boolean,default:!1},manualInputTimeout:{type:[Number,String]},hideDropdown:{type:Boolean,default:!1},fixedDropdownButton:{type:Boolean,default:!1},debugMode:{type:Boolean,default:!1}},data(){return{timeValue:{},hours:[],minutes:[],seconds:[],apms:[],isActive:!1,showDropdown:!1,isFocusing:!1,debounceTimer:void 0,hourType:"HH",minuteType:"mm",secondType:"",apmType:"",hour:"",minute:"",second:"",apm:"",fullValues:void 0,bakDisplayTime:void 0,doClearApmChecking:!1,selectionTimer:void 0,kbInputTimer:void 0,kbInputLog:"",bakCurrentPos:void 0,forceDropOnTop:!1}},emits:["update:modelValue","change","open","close","focus","blur","error"],computed:{opts(){const e=Object.assign({},L);return this.format&&this.format.length&&(e.format=String(this.format)),this.isNumber(this.minuteInterval)&&(e.minuteInterval=+this.minuteInterval),(!e.minuteInterval||e.minuteInterval<1||e.minuteInterval>60)&&(this.debugMode&&(e.minuteInterval>60?this.debugLog(`"minute-interval" should be less than 60. Current value is ${this.minuteInterval}`):(e.minuteInterval===0||e.minuteInterval<1)&&this.debugLog(`"minute-interval" should be NO less than 1. Current value is ${this.minuteInterval}`)),e.minuteInterval===0?e.minuteInterval=60:e.minuteInterval=1),this.isNumber(this.secondInterval)&&(e.secondInterval=+this.secondInterval),(!e.secondInterval||e.secondInterval<1||e.secondInterval>60)&&(this.debugMode&&(e.secondInterval>60?this.debugLog(`"second-interval" should be less than 60. Current value is ${this.secondInterval}`):(e.secondInterval===0||e.secondInterval<1)&&this.debugLog(`"second-interval" should be NO less than 1. Current value is ${this.secondInterval}`)),e.secondInterval===0?e.secondInterval=60:e.secondInterval=1),this.hourRange&&Array.isArray(this.hourRange)&&(e.hourRange=JSON.parse(JSON.stringify(this.hourRange)),!this.hourRange.length&&this.debugMode&&this.debugLog('The "hour-range" array is empty (length === 0)')),this.minuteRange&&Array.isArray(this.minuteRange)&&(e.minuteRange=JSON.parse(JSON.stringify(this.minuteRange)),!this.minuteRange.length&&this.debugMode&&this.debugLog('The "minute-range" array is empty (length === 0)')),this.secondRange&&Array.isArray(this.secondRange)&&(e.secondRange=JSON.parse(JSON.stringify(this.secondRange)),!this.secondRange.length&&this.debugMode&&this.debugLog('The "second-range" array is empty (length === 0)')),this.hideDisabledItems&&(e.hideDisabledItems=!0),(this.hideDisabledHours||this.hideDisabledItems)&&(e.hideDisabledHours=!0),(this.hideDisabledMinutes||this.hideDisabledItems)&&(e.hideDisabledMinutes=!0),(this.hideDisabledSeconds||this.hideDisabledItems)&&(e.hideDisabledSeconds=!0),this.hideDropdown&&(this.manualInput?e.hideDropdown=!0:this.debugMode&&this.debugLog('"hide-dropdown" only works with "manual-input" mode')),this.blurDelay&&+this.blurDelay>0&&(e.blurDelay=+this.blurDelay),this.manualInputTimeout&&+this.manualInputTimeout>0&&(e.manualInputTimeout=+this.manualInputTimeout),this.dropOffsetHeight&&+this.dropOffsetHeight>0&&(e.dropOffsetHeight=+this.dropOffsetHeight),e},useStringValue(){return typeof this.modelValue=="string"},formatString(){return this.opts.format||L.format},inUse(){const e=x.BASIC_TYPES.filter(i=>this.getTokenByType(i));e.sort((i,n)=>this.formatString.indexOf(this.getTokenByType(i)||null)-this.formatString.indexOf(this.getTokenByType(n)||null));const t=e.map(i=>this.getTokenByType(i));return{hour:!!this.hourType,minute:!!this.minuteType,second:!!this.secondType,apm:!!this.apmType,types:e||[],tokens:t||[]}},displayTime(){let e=String(this.formatString);return this.hour&&(e=e.replace(new RegExp(this.hourType,"g"),this.hour)),this.minute&&(e=e.replace(new RegExp(this.minuteType,"g"),this.minute)),this.second&&this.secondType&&(e=e.replace(new RegExp(this.secondType,"g"),this.second)),this.apm&&this.apmType&&(e=e.replace(new RegExp(this.apmType,"g"),this.apm)),e},customDisplayTime(){return!this.amText&&!this.pmText?this.displayTime:this.displayTime.replace(new RegExp(this.apm,"g"),this.apmDisplayText(this.apm))},inputIsEmpty(){return this.formatString===this.displayTime},allValueSelected(){return!(this.inUse.hour&&!this.hour||this.inUse.minute&&!this.minute||this.inUse.second&&!this.second||this.inUse.apm&&!this.apm)},columnsSequence(){return this.inUse.types.map(e=>e)||[]},showClearBtn(){return this.hideClearButton||this.disabled?!1:!this.inputIsEmpty},showDropdownBtn(){return!!(this.fixedDropdownButton||this.opts.hideDropdown&&this.isActive&&!this.showDropdown)},baseOn12Hours(){return this.hourType==="h"||this.hourType==="hh"},hourRangeIn24HrFormat(){if(!this.hourType||!this.opts.hourRange)return!1;if(!this.opts.hourRange.length)return[];const e=[];return this.opts.hourRange.forEach(t=>{if(t instanceof Array){t.length>2&&this.debugMode&&this.debugLog(`Nested array within "hour-range" must contain no more than two items. Only the first two items of ${JSON.stringify(t)} will be taken into account.`);let i=t[0],n=t[1]||t[0];this.is12hRange(i)&&(i=this.translate12hRange(i)),this.is12hRange(n)&&(n=this.translate12hRange(n));for(let a=+i;a<=+n;a++)a<0||a>24||e.includes(a)||e.push(a)}else{if(this.is12hRange(t)?t=this.translate12hRange(t):t=+t,t<0||t>24)return;e.includes(t)||e.push(t)}}),e.sort((t,i)=>t-i),e},restrictedHourRange(){return this.hourRangeIn24HrFormat?this.baseOn12Hours?this.hourRangeIn24HrFormat.map(t=>t===12?"12p":t===24||t===0?"12a":t>12?`${t%12}p`:`${t}a`):this.hourRangeIn24HrFormat:!1},validHoursList(){if(!this.manualInput)return!1;if(this.restrictedHourRange){let e=[];if(this.baseOn12Hours){e=this.restrictedHourRange.map(i=>{const n=i.substr(0,i.length-1),a=i.substr(-1);return`${this.formatValue(this.hourType,n)}${a}`});const t=e.indexOf("12a");return t>0&&e.unshift(e.splice(t,1)[0]),e}return e=this.restrictedHourRange.map(t=>this.formatValue(this.hourType,t)),e.length>1&&e[0]&&e[0]==="24"&&e.push(e.shift()),e}return this.baseOn12Hours?[].concat([],this.hours.map(e=>`${e}a`),this.hours.map(e=>`${e}p`)):this.hours},has(){const e={customApmText:!1},t=!!this.apmType;if(t&&this.hourRangeIn24HrFormat&&this.hourRangeIn24HrFormat.length){const i=[].concat([],this.hourRangeIn24HrFormat);e.am=i.some(n=>n<12||n===24),e.pm=i.some(n=>n>=12&&n<24)}else e.am=t,e.pm=t;return(this.amText&&this.amText.length||this.pmText&&this.pmText.length)&&(e.customApmText=!0),e},minuteRangeList(){return!this.minuteType||!this.opts.minuteRange?!1:this.opts.minuteRange.length?this.renderRangeList(this.opts.minuteRange,"minute"):[]},secondRangeList(){return!this.secondType||!this.opts.secondRange?!1:this.opts.secondRange.length?this.renderRangeList(this.opts.secondRange,"second"):[]},hourLabelText(){return this.hourLabel||this.hourType},minuteLabelText(){return this.minuteLabel||this.minuteType},secondLabelText(){return this.secondLabel||this.secondType},apmLabelText(){return this.apmLabel||this.apmType},inputWidthStyle(){if(!(!this.inputWidth||!this.inputWidth.length))return{width:this.inputWidth}},tokenRegexBase(){return this.inUse.tokens.join("|")},tokenChunks(){if(!this.manualInput&&!this.useStringValue)return!1;const e=String(this.formatString),t=`(${this.tokenRegexBase})+?`,i=this.getMatchAllByRegex(e,t),n=[];for(let a of i){const s=a[0],o={index:a.index,token:s,type:this.getTokenType(s),needsCalibrate:s.length<2,len:(s||"").length};n.push(o)}return n},needsPosCalibrate(){return this.manualInput?this.tokenChunks.some(e=>e.needsCalibrate):!1},tokenChunksPos(){if(!this.manualInput)return!1;if(!this.needsPosCalibrate)return this.tokenChunks.map(i=>({token:i.token,type:i.type,start:i.index,end:i.index+i.len}));const e=[];let t=0;return this.tokenChunks.forEach(i=>{let n;if(i.type==="apm"&&this.has.customApmText)if(this.apm&&this.apm.length){const a=this.apm.toLowerCase()==="am"?this.amText:this.pmText;n=a&&a.length?a.length:i.len}else n=i.len;else n=this[i.type]&&this[i.type].length?this[i.type].length:i.len;e.push({token:i.token,type:i.type,start:i.index+t,end:i.index+t+n}),i.needsCalibrate&&n>i.len&&(t+=n-i.len)}),e},invalidValues(){if(this.inputIsEmpty)return[];if(!this.restrictedHourRange&&!this.minuteRangeList&&!this.secondRangeList&&this.opts.minuteInterval===1&&this.opts.secondInterval===1)return[];const e=[];return this.inUse.hour&&!this.isEmptyValue(this.hourType,this.hour)&&(!this.isValidValue(this.hourType,this.hour)||this.isDisabled("hour",this.hour))&&e.push("hour"),this.inUse.minute&&!this.isEmptyValue(this.minuteType,this.minute)&&(!this.isValidValue(this.minuteType,this.minute)||this.isDisabled("minute",this.minute)||this.notInInterval("minute",this.minute))&&e.push("minute"),this.inUse.second&&!this.isEmptyValue(this.secondType,this.second)&&(!this.isValidValue(this.secondType,this.second)||this.isDisabled("second",this.second)||this.notInInterval("second",this.second))&&e.push("second"),this.inUse.apm&&!this.isEmptyValue(this.apmType,this.apm)&&(!this.isValidValue(this.apmType,this.apm)||this.isDisabled("apm",this.apm))&&e.push("apm"),e.length?e:[]},hasInvalidInput(){return Boolean(this.invalidValues&&this.invalidValues.length)},autoDirectionEnabled(){return this.dropDirection==="auto"},dropdownDirClass(){return this.autoDirectionEnabled?this.forceDropOnTop?"drop-up":"drop-down":this.dropDirection==="up"?"drop-up":"drop-down"}},watch:{"opts.format"(e){this.renderFormat(e)},"opts.minuteInterval"(e){this.renderList("minute",e)},"opts.secondInterval"(e){this.renderList("second",e)},value:{deep:!0,handler(){this.readValues()}},displayTime(){this.fillValues()},disabled(e){e&&(this.isActive&&(this.isActive=!1),this.showDropdown&&(this.showDropdown=!1))},"invalidValues.length"(e,t){e&&e>=1?this.$emit("error",this.invalidValues):t&&t>=1&&this.$emit("error",[])}},methods:{formatValue(e,t){if(!this.isNumber(t))return"";switch(t=+t,e){case"H":case"h":case"k":case"m":case"s":return["h","k"].includes(e)&&t===0?e==="k"?"24":"12":String(t);case"HH":case"mm":case"ss":case"hh":case"kk":return["hh","kk"].includes(e)&&t===0?e==="kk"?"24":"12":t<10?`0${t}`:String(t);default:return""}},checkAcceptingType(e,t){if(!e||!t||!t.length)return"";for(let i=0;i<e.length;i++)if(t.indexOf(e[i])>-1)return e[i];return""},renderFormat(e){e=e||this.opts.format||L.format;let t=this.checkAcceptingType(x.HOUR_TOKENS,e),i=this.checkAcceptingType(x.MINUTE_TOKENS,e);this.secondType=this.checkAcceptingType(x.SECOND_TOKENS,e),this.apmType=this.checkAcceptingType(x.APM_TOKENS,e),!t&&!i&&!this.secondType&&!this.apmType&&(this.debugMode&&this.format&&this.debugLog(`No valid tokens found in your defined "format" string "${this.format}". Fallback to the default "HH:mm" format.`),t="HH",i="mm"),this.hourType=t,this.minuteType=i,this.hourType?this.renderHoursList():this.hours=[],this.minuteType?this.renderList("minute"):this.minutes=[],this.secondType?this.renderList("second"):this.seconds=[],this.apmType?this.renderApmList():this.apms=[],D(()=>{this.readValues()})},renderHoursList(){const e=this.baseOn12Hours?12:24,t=[];for(let i=0;i<e;i++)this.hourType==="k"||this.hourType==="kk"?t.push(this.formatValue(this.hourType,i+1)):t.push(this.formatValue(this.hourType,i));this.hours=t},renderList(e,t){if(!this.isMinuteOrSecond(e))return;const i=e==="minute";t=t||(i?this.opts.minuteInterval||L.minuteInterval:this.opts.secondInterval||L.secondInterval);const n=[];for(let a=0;a<60;a+=t)n.push(this.formatValue(i?this.minuteType:this.secondType,a));i?this.minutes=n:this.seconds=n},renderApmList(){this.apms=this.apmType==="A"?["AM","PM"]:["am","pm"]},readValues(){this.useStringValue?(this.debugMode&&this.debugLog(`Received a string value: "${this.modelValue}"`),this.readStringValues(this.modelValue)):(this.debugMode&&this.debugLog(`Received an object value: "${JSON.stringify(this.modelValue||{})}"`),this.readObjectValues(this.modelValue))},readObjectValues(e){const t=JSON.parse(JSON.stringify(e||{})),i=Object.keys(t);if(i.length===0){this.addFallbackValues();return}x.BASIC_TYPES.forEach(n=>{const a=this.getTokenByType(n);if(i.indexOf(a)>-1){const s=this.sanitizedValue(a,t[a]);this[n]=s,t[a]=s}else this[n]=""}),this.timeValue=t},getMatchAllByRegex(e,t){const i="polyfillTest";return Boolean(!i.matchAll||typeof i.matchAll!="function")?this.polyfillMatchAll(e,t):e.matchAll(new RegExp(t,"g"))},readStringValues(e){if(!e||!e.length){this.addFallbackValues();return}const t=String(this.formatString),i=`(${this.tokenRegexBase})+?`,n=`[^(${this.tokenRegexBase})]+`,a=this.getMatchAllByRegex(t,i),s=this.getMatchAllByRegex(t,n),o=[],r=[];for(let T of a){const y={index:T.index,token:T[0],isValueToken:!0};o.push(y),r.push(y)}for(let T of s)o.push({index:T.index,token:T[0]});o.sort((T,y)=>T.index<y.index?-1:1);let m="";if(o.forEach(T=>{T.isValueToken?m+=this.getTokenRegex(T.token)||"":m+=`(?:${T.token.replace(/\\{0}(\*|\?|\.|\+)/g,"\\$1")})`}),new RegExp(m).test(e)){const y=e.match(new RegExp(m)).slice(1,r.length+1),R={};if(y.forEach((w,H)=>{if(r[H]){const F=r[H].token;R[F]=this.setValueFromString(w,F)}}),this.timeValue=R,this.debugMode){const w=r.map(H=>H&&H.token);this.debugLog(`Successfully parsed values ${JSON.stringify(y)}
for ${JSON.stringify(w)}
in format pattern '${this.formatString}'`)}}else this.debugMode&&this.debugLog(`The input string in "v-model" does NOT match the "format" pattern
format: ${this.formatString}
v-model: ${e}`)},polyfillMatchAll(e,t){const i=e.match(new RegExp(t,"g")),n=[],a=[];return i&&i.length&&i.forEach(s=>{const o=a.findIndex(m=>m.str===s);let r;if(o>=0)a[o]&&a[o].regex&&(r=a[o].regex.exec(e).index);else{const m=new RegExp(s,"g");r=m.exec(e).index,a.push({str:String(s),regex:m})}n.push({0:String(s),index:r})}),n},addFallbackValues(){const e={};this.inUse.types.forEach(t=>{e[this.getTokenByType(t)]=""}),this.timeValue=e},setValueFromString(e,t){if(!t||!e)return"";const i=this.getTokenType(t);if(!i||!i.length)return"";const n=e!==this.getTokenByType(i)?e:"";return this[i]=n,n},fillValues(e){const t={},i=this.hour,n=this.hourType;let a;if(!n||!this.isNumber(i))x.HOUR_TOKENS.forEach(s=>t[s]=""),a=this.lowerCasedApm(this.apm||""),t.a=a,t.A=a.toUpperCase();else{const s=+i,o=this.baseOn12Hours&&this.apm?this.lowerCasedApm(this.apm):!1;x.HOUR_TOKENS.forEach(r=>{if(r===n){t[r]=i;return}let m,l;switch(r){case"H":case"HH":case"k":case"kk":this.baseOn12Hours?o==="pm"?m=s<12?s+12:s:["k","kk"].includes(r)?m=s===12?24:s:m=s%12:["k","kk"].includes(r)?m=s===0?24:s:m=s%24,t[r]=this.formatValue(r,m);break;case"h":case"hh":this.baseOn12Hours?(m=s,l=o||""):s>11&&s<24?(l="pm",m=s===12?12:s%12):(l="am",m=s%12===0?12:s),t[r]=this.formatValue(r,m),t.a=l,t.A=l.toUpperCase();break}})}t.m=this.formatValue("m",this.minute),t.mm=this.formatValue("mm",this.minute),t.s=this.formatValue("s",this.second),t.ss=this.formatValue("ss",this.second),this.fullValues=t,(!this.lazy||e)&&this.emitTimeValue(),this.closeOnComplete&&this.allValueSelected&&this.showDropdown&&this.toggleActive()},emitTimeValue(){if(!this.fullValues)return;if(this.lazy&&this.bakDisplayTime===this.displayTime){this.debugMode&&this.debugLog("The value does not change on `lazy` mode. Skip the emitting `input` and `change` event.");return}const e=JSON.parse(JSON.stringify(this.fullValues));if(this.useStringValue)this.$emit("update:modelValue",this.inputIsEmpty?"":String(this.displayTime));else{const t=this.inUse.tokens||[],i={};t.forEach(n=>{i[n]=e[n]||""}),this.$emit("update:modelValue",JSON.parse(JSON.stringify(i)))}this.$emit("change",{data:e,displayTime:this.inputIsEmpty?"":String(this.displayTime)})},translate12hRange(e){const t=this.match12hRange(e);return+t[1]==12?+t[1]+(t[2].toLowerCase()==="p"?0:12):+t[1]+(t[2].toLowerCase()==="p"?12:0)},isDisabled(e,t){if(!this.isBasicType(e)||!this.inUse[e])return!0;switch(e){case"hour":return this.isDisabledHour(t);case"minute":case"second":return this[`${e}RangeList`]?!this[`${e}RangeList`].includes(t):!1;case"apm":return this.restrictedHourRange?!this.has[this.lowerCasedApm(t)]:!1;default:return!0}},isDisabledHour(e){if(!this.restrictedHourRange)return!1;if(this.baseOn12Hours){if(!this.apm||!this.apm.length)return!1;{const t=this.apm.toLowerCase()==="am"?"a":"p";return!this.restrictedHourRange.includes(`${+e}${t}`)}}return(this.hourType==="HH"||this.hourType==="H")&&+e==0&&this.restrictedHourRange.includes(24)?!1:!this.restrictedHourRange.includes(+e)},notInInterval(e,t){if(!(!e||!this.isMinuteOrSecond(e)))return this.opts[`${e}Interval`]===1?!1:+t%this.opts[`${e}Interval`]!==0},renderRangeList(e,t){if(!e||!t||!this.isMinuteOrSecond(t))return[];const i=[];let n;if(e.forEach(a=>{if(a instanceof Array){a.length>2&&this.debugMode&&this.debugLog(`Nested array within "${t}-range" must contain no more than two items. Only the first two items of ${JSON.stringify(a)} will be taken into account.`);const s=a[0],o=a[1]||a[0];for(let r=+s;r<=+o;r++)r<0||r>59||(n=this.formatValue(this.getTokenByType(t),r),i.includes(n)||i.push(n))}else{if(+a<0||+a>59)return;n=this.formatValue(this.getTokenByType(t),a),i.includes(n)||i.push(n)}}),i.sort((a,s)=>a-s),this.debugMode){const s=((t==="minute"?this.minutes:this.seconds)||[]).filter(o=>i.includes(o));(!s||!s.length)&&(t==="minute"?this.debugLog(`The minute list is empty due to the "minute-range" config
minute-range: ${JSON.stringify(this.minuteRange)}
minute-interval: ${this.opts.minuteInterval}`):this.debugLog(`The second list is empty due to the "second-range" config
second-range: ${JSON.stringify(this.secondRange)}
second-interval: ${this.opts.secondInterval}`))}return i},forceApmSelection(){if(!this.manualInput&&this.apmType&&!this.apm&&(this.has.am||this.has.pm)){this.doClearApmChecking=!0;const e=this.has.am?"am":"pm";this.apm=this.apmType==="A"?e.toUpperCase():e}},emptyApmSelection(){this.doClearApmChecking&&this.hour===""&&this.minute===""&&this.second===""&&(this.apm=""),this.doClearApmChecking=!1},apmDisplayText(e){return this.amText&&this.lowerCasedApm(e)==="am"?this.amText:this.pmText&&this.lowerCasedApm(e)==="pm"?this.pmText:e},toggleActive(){this.disabled||(this.isActive=!this.isActive,this.isActive?(this.isFocusing=!0,this.manualInput&&this.$emit("focus"),this.opts.hideDropdown||this.setDropdownState(!0),this.lazy&&(this.bakDisplayTime=String(this.displayTime||"")),this.manualInput&&!this.inputIsEmpty&&D(()=>{this.$refs.input&&this.$refs.input.selectionStart===0&&this.$refs.input.selectionEnd===this.displayTime.length&&this.selectFirstSlot()})):(this.showDropdown?this.setDropdownState(!1):this.manualInput&&this.$emit("blur"),this.isFocusing=!1,this.lazy&&(this.fillValues(!0),this.bakDisplayTime=void 0)),this.restrictedHourRange&&this.baseOn12Hours&&(this.showDropdown?this.forceApmSelection():this.emptyApmSelection()),this.showDropdown&&this.checkForAutoScroll())},setDropdownState(e,t=!1){e?(this.keepFocusing(),this.autoDirectionEnabled&&this.checkDropDirection(),this.showDropdown=!0,this.$emit("open"),t&&(this.fixedDropdownButton&&(this.isActive=!0),this.$emit("blur"),this.checkForAutoScroll())):(this.showDropdown=!1,this.$emit("close"))},blurEvent(){this.manualInput&&!this.opts.hideDropdown&&this.$emit("blur")},select(e,t){this.isBasicType(e)&&!this.isDisabled(e,t)&&(this[e]=t,this.doClearApmChecking&&(this.doClearApmChecking=!1))},clearTime(){this.disabled||(this.hour="",this.minute="",this.second="",this.apm="",this.manualInput&&this.$refs&&this.$refs.input&&this.$refs.input.value.length&&(this.$refs.input.value=""),this.lazy&&this.fillValues(!0))},checkForAutoScroll(){this.inputIsEmpty||(this.autoScroll?D(()=>{this.scrollToSelectedValues()}):this.advancedKeyboard&&D(()=>{const e=this.inUse.types[0];this.scrollToSelected(e,!0)}))},scrollToSelected(e,t=!1){if(!this.timeValue||this.inputIsEmpty)return;const i=this.$el.querySelectorAll(`ul.${e}s`)[0];let n=this.activeItemInCol(e)[0];!n&&t&&(n=this.validItemsInCol(e)[0]),i&&n&&(i.scrollTop=n.offsetTop||0,this.advancedKeyboard&&n.focus())},scrollToSelectedValues(){!this.timeValue||this.inputIsEmpty||this.inUse.types.forEach(e=>{this.scrollToSelected(e)})},onFocus(){this.disabled||(this.isFocusing||(this.isFocusing=!0),this.isActive||this.toggleActive())},escBlur(){if(this.disabled)return;window.clearTimeout(this.debounceTimer),this.isFocusing=!1;const e=this.$el.querySelectorAll("input.vue__time-picker-input")[0];e&&e.blur()},debounceBlur(){this.disabled||(this.isFocusing=!1,window.clearTimeout(this.debounceTimer),this.debounceTimer=window.setTimeout(()=>{window.clearTimeout(this.debounceTimer),this.onBlur()},this.opts.blurDelay))},onBlur(){!this.disabled&&!this.isFocusing&&this.isActive&&this.toggleActive()},keepFocusing(){this.disabled||(window.clearTimeout(this.debounceTimer),this.isFocusing||(this.isFocusing=!0))},validItemsInCol(e){const t=`${e}s`;return this.$el.querySelectorAll(`ul.${t} > li:not(.hint):not([disabled])`)},activeItemInCol(e){const t=`${e}s`;return this.$el.querySelectorAll(`ul.${t} > li.active:not(.hint)`)},getClosestSibling(e,t,i=!1){const n=this.validItemsInCol(e),a=Array.prototype.findIndex.call(n,s=>s.getAttribute("data-key")===t);return i&&a===0?n[n.length-1]:!i&&a===n.length-1||a<0?n[0]:i?n[a-1]:n[a+1]},prevItem(e,t,i=!1){const n=this.getClosestSibling(e,t,!0);if(n)return i?n:n.focus()},nextItem(e,t,i=!1){const n=this.getClosestSibling(e,t,!1);if(n)return i?n:n.focus()},getSideColumnName(e,t=!1){const i=this.inUse.types.indexOf(e);if(t&&i<=0){this.debugMode&&this.debugLog("You're in the leftmost list already");return}else if(!t&&i===this.inUse.types.length-1){this.debugMode&&this.debugLog("You're in the rightmost list already");return}return this.inUse.types[t?i-1:i+1]},getFirstItemInSideColumn(e,t=!1){const i=this.getSideColumnName(e,t);if(!i)return;const n=this.validItemsInCol(i);if(n&&n[0])return n[0]},getActiveItemInSideColumn(e,t=!1){const i=this.getSideColumnName(e,t);if(!i)return;const n=this.activeItemInCol(i);if(n&&n[0])return n[0]},toLeftColumn(e){const t=this.getActiveItemInSideColumn(e,!0)||this.getFirstItemInSideColumn(e,!0);t&&t.focus()},toRightColumn(e){const t=this.getActiveItemInSideColumn(e,!1)||this.getFirstItemInSideColumn(e,!1);t&&t.focus()},onMouseDown(){!this.manualInput||(window.clearTimeout(this.selectionTimer),this.selectionTimer=window.setTimeout(()=>{if(window.clearTimeout(this.selectionTimer),this.$refs&&this.$refs.input){const e=this.getNearestChunkByPos(this.$refs.input.selectionStart||0);this.debounceSetInputSelection(e)}},50))},keyDownHandler(e){if(e.isComposing||e.keyCode===229)return e.preventDefault(),e.stopPropagation(),!1;e.keyCode>=48&&e.keyCode<=57||e.keyCode>=96&&e.keyCode<=105?(e.preventDefault(),this.keyboardInput(e.key)):[65,80,77].includes(e.keyCode)?(e.preventDefault(),this.keyboardInput(e.key,!0)):e.keyCode>=37&&e.keyCode<=40?(e.preventDefault(),this.clearKbInputLog(),this.arrowHandler(e)):e.keyCode===8||e.keyCode===46?(e.preventDefault(),this.clearKbInputLog(),this.clearTime()):e.keyCode===9?(this.clearKbInputLog(),this.tabHandler(e)):e.keyCode!==27&&!(e.metaKey||e.ctrlKey)&&e.preventDefault()},onCompostionStart(e){return e.preventDefault(),e.stopPropagation(),this.bakCurrentPos=this.getCurrentTokenChunk(),!1},onCompostionEnd(e){e.preventDefault(),e.stopPropagation();const t=e.data;let i=!1;return this.has.customApmText&&(i=this.isCustomApmText(t)),i&&this.setSanitizedValueToSection("apm",i),this.$refs.input.value=this.has.customApmText?this.customDisplayTime:this.displayTime,D(()=>{if(this.bakCurrentPos){const n=JSON.parse(JSON.stringify(this.bakCurrentPos));i&&(n.end=n.start+t.length),this.debounceSetInputSelection(n),this.bakCurrentPos=null}}),!1},pasteHandler(e){e.preventDefault();let t=(e.clipboardData||window.clipboardData).getData("text");this.debugMode&&this.debugLog(`Pasting value "${t}" from clipboard`),!(!t||!t.length)&&(this.has.customApmText&&(t=this.replaceCustomApmText(t)),this.inputIsEmpty?this.readStringValues(t):(this.kbInputLog=t.substr(-2,2),this.setKbInput(),this.debounceClearKbLog()))},arrowHandler(e){const t={37:"L",38:"U",39:"R",40:"D"}[e.keyCode];if(t==="U"||t==="D")if(this.inputIsEmpty)this.selectFirstValidValue();else{const i=this.getCurrentTokenChunk();if(!i){this.selectFirstValidValue();return}const n=i.type;this.getClosestValidItemInCol(n,this[n],t);const a=this.getCurrentTokenChunk();this.debounceSetInputSelection(a)}else t==="R"?this.toLateralToken(!1):t==="L"&&this.toLateralToken(!0)},tabHandler(e){if(!this.inputIsEmpty&&this.tokenChunksPos&&this.tokenChunksPos.length){const t=this.getCurrentTokenChunk();if(!t)return;const i=this.tokenChunksPos[0],n=this.tokenChunksPos[this.tokenChunksPos.length-1];(e.shiftKey&&t.token!==i.token||!e.shiftKey&&t.token!==n.token)&&(e.preventDefault(),this.toLateralToken(e.shiftKey))}},keyboardInput(e,t=!1){const i=this.getCurrentTokenChunk();!i||i.type!=="apm"&&t||i.type==="apm"&&!t||(this.kbInputLog=`${this.kbInputLog.substr(-1)}${e}`,this.setKbInput(),this.debounceClearKbLog())},clearKbInputLog(){window.clearTimeout(this.kbInputTimer),this.kbInputLog=""},debounceClearKbLog(){window.clearTimeout(this.kbInputTimer),this.kbInputTimer=window.setTimeout(()=>{this.clearKbInputLog()},this.opts.manualInputTimeout)},setKbInput(e){e=e||this.kbInputLog;const t=this.getCurrentTokenChunk();if(!t||!e||!e.length)return;const i=t.type,n=t.token;let a;if(i==="apm")this.lowerCasedApm(e).includes("a")?a="am":this.lowerCasedApm(e).includes("p")&&(a="pm"),a&&(a=n==="A"?a.toUpperCase():a);else if(this.isValidValue(n,e))a=e;else{const s=this.formatValue(n,e.substr(-1));this.isValidValue(n,s)&&(a=s)}if(a){this.setSanitizedValueToSection(i,a);const s=this.getCurrentTokenChunk();this.debounceSetInputSelection(s)}this.debugMode&&(a?this.debugLog(`Successfully set value "${a}" from latest input "${e}" for the "${i}" slot`):this.debugLog(`Value "${e}" is invalid in the "${i}" slot`))},onChange(){if(!this.manualInput||!this.$refs||!this.$refs.input)return;const e=this.$refs.input.value||"";e&&e.length&&this.readStringValues(e)},getNearestChunkByPos(e){if(!this.tokenChunksPos||!this.tokenChunksPos.length)return;let t,i=-1;for(let n=0;n<this.tokenChunksPos.length;n++){const a=JSON.parse(JSON.stringify(this.tokenChunksPos[n]));if(a.start===e)return a;const s=Math.abs(a.start-e);if(i<0)t=a,i=s;else{if(i<=s)return t;i=s,t=a}}return t},selectFirstValidValue(){if(!this.tokenChunksPos||!this.tokenChunksPos.length)return;const e=this.tokenChunksPos[0].type;e==="hour"?this.getClosestHourItem():this.getClosestValidItemInCol(e,this[e]),this.selectFirstSlot()},getClosestHourItem(e,t="U"){if(!this.validHoursList||!this.validHoursList.length){this.debugMode&&this.debugLog(`No valid hour values found, please check your "hour-range" config
hour-range: ${JSON.stringify(this.hourRange)}`);return}if(!e){this.setManualHour(this.validHoursList[0]);return}const i=this.validHoursList.findIndex(s=>{if(this.baseOn12Hours){const o=`${e}${this.lowerCasedApm(this.apm)==="pm"?"p":"a"}`;return s===o}else return s===e});let n;i===-1?n=0:t==="D"?n=i===0?this.validHoursList.length-1:i-1:n=(i+1)%this.validHoursList.length;const a=this.validHoursList[n];this.setManualHour(a)},getClosestValidItemInCol(e,t,i="U"){if(e==="hour")this.getClosestHourItem(t,i);else{const n=i==="D"?this.prevItem(e,this[e],!0):this.nextItem(e,this[e],!0);n&&this.select(e,n.getAttribute("data-key"))}},setSanitizedValueToSection(e,t){if(!e||!this.getTokenByType(e))return;const i=this.sanitizedValue(this.getTokenByType(e),t);this[e]=i},setManualHour(e){if(this.is12hRange(e)){const t=this.match12hRange(e),i=t[2]==="a"?"AM":"PM";this.setSanitizedValueToSection("apm",this.apmType==="a"?i.toLowerCase():i),this.setSanitizedValueToSection("hour",t[1])}else this.setSanitizedValueToSection("hour",e)},debounceSetInputSelection({start:e=0,end:t=0}){D(()=>{this.setInputSelectionRange(e,t)}),window.clearTimeout(this.selectionTimer),this.selectionTimer=window.setTimeout(()=>{window.clearTimeout(this.selectionTimer),this.$refs.input&&(this.$refs.input.selectionStart!==e||this.$refs.input.selectionEnd!==t)&&this.setInputSelectionRange(e,t)},30)},setInputSelectionRange(e,t){this.$refs&&this.$refs.input&&this.$refs.input.setSelectionRange(e,t)},getCurrentTokenChunk(){return this.getNearestChunkByPos(this.$refs.input&&this.$refs.input.selectionStart||0)},selectFirstSlot(){const e=this.getNearestChunkByPos(0);this.debounceSetInputSelection(e)},toLateralToken(e){const t=this.getCurrentTokenChunk();if(!t){this.selectFirstValidValue();return}const i=this.tokenChunksPos.findIndex(a=>a.token===t.token);if(!e&&i>=this.tokenChunksPos.length-1||e&&i===0){this.debugMode&&(e?this.debugLog("You're in the leftmost slot already"):this.debugLog("You're in the rightmost slot already"));return}const n=e?this.tokenChunksPos[i-1]:this.tokenChunksPos[i+1];this.debounceSetInputSelection(n)},isCustomApmText(e){return!e||!e.length?!1:this.amText&&this.amText===e?this.apmType==="A"?"AM":"am":this.pmText&&this.pmText===e?this.apmType==="A"?"PM":"pm":!1},replaceCustomApmText(e){return this.amText&&this.amText.length&&e.includes(this.amText)?e.replace(new RegExp(this.amText,"g"),this.apmType==="A"?"AM":"am"):this.pmText&&this.pmText.length&&e.includes(this.pmText)?e.replace(new RegExp(this.pmText,"g"),this.apmType==="A"?"PM":"pm"):e},checkDropDirection(){if(!this.$el)return;let e;this.containerId&&this.containerId.length&&(e=document.getElementById(this.containerId),!e&&this.debugMode&&this.debugLog(`Container with id "${this.containerId}" not found. Fallback to document body.`));const t=this.$el;let i;e&&e.offsetHeight?i=e.offsetTop+e.offsetHeight-(t.offsetTop+t.offsetHeight):i=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight)-(t.offsetTop+t.offsetHeight),this.forceDropOnTop=this.opts.dropOffsetHeight>i},is12hRange(e){return/^\d{1,2}(a|p|A|P)$/.test(e)},match12hRange(e){return e.match(/^(\d{1,2})(a|p|A|P)$/)},isNumber(e){return!isNaN(parseFloat(e))&&isFinite(e)},isBasicType(e){return x.BASIC_TYPES.includes(e)},lowerCasedApm(e){return(e||"").toLowerCase()},getTokenRegex(e){switch(e){case"HH":return"([01][0-9]|2[0-3]|H{2})";case"H":return"([0-9]{1}|1[0-9]|2[0-3]|H{1})";case"hh":return"(0[1-9]|1[0-2]|h{2})";case"h":return"([1-9]{1}|1[0-2]|h{1})";case"kk":return"(0[1-9]|1[0-9]|2[0-4]|k{2})";case"k":return"([1-9]{1}|1[0-9]|2[0-4]|k{1})";case"mm":return"([0-5][0-9]|m{2})";case"ss":return"([0-5][0-9]|s{2})";case"m":return"([0-9]{1}|[1-5][0-9]|m{1})";case"s":return"([0-9]{1}|[1-5][0-9]|s{1})";case"A":return"(AM|PM|A{1})";case"a":return"(am|pm|a{1})";default:return""}},isEmptyValue(e,t){return!t||!t.length||t&&t===e},isValidValue(e,t){if(!e||this.isEmptyValue(e,t))return!1;const i=this.getTokenRegex(e);return!i||!i.length?!1:new RegExp(`^${i}$`).test(t)},sanitizedValue(e,t){return this.isValidValue(e,t)?t:""},getTokenType(e){return this.inUse.types[this.inUse.tokens.indexOf(e)]||""},getTokenByType(e){return this[`${e}Type`]||""},isMinuteOrSecond(e){return["minute","second"].includes(e)},booleanAttr(e=!1){return e?!0:null},debugLog(e){if(!e||!e.length)return;let t="";if(this.id&&(t+=`#${this.id}`),this.name&&(t+=`[name=${this.name}]`),this.inputClass){let n=[];typeof this.inputClass=="string"?n=this.inputClass.split(/\s/g):Array.isArray(this.inputClass)?n=[].concat([],this.inputClass):typeof this.inputClass=="object"&&Object.keys(this.inputClass).forEach(a=>{this.inputClass[a]&&n.push(a)});for(let a of n)a&&a.trim().length&&(t+=`.${a.trim()}`)}const i=`DEBUG: ${e}${t?`
	(${t})`:""}`;window.console.debug&&typeof window.console.debug=="function"?window.console.debug(i):window.console.log(i)}},mounted(){window.clearTimeout(this.debounceTimer),window.clearTimeout(this.selectionTimer),window.clearTimeout(this.kbInputTimer),this.renderFormat()},beforeUnmount(){window.clearTimeout(this.debounceTimer),window.clearTimeout(this.selectionTimer),window.clearTimeout(this.kbInputTimer)}};const ee={key:0,class:"controls",tabindex:"-1"},te=d("span",{class:"char"},"\xD7",-1),se=d("span",{class:"char"},"\u25BE",-1),ie={key:1,class:"custom-icon"};function ne(e,t,i,n,a,s){return u(),h("span",{class:"vue__time-picker",style:s.inputWidthStyle},[d("input",{type:"text",class:["vue__time-picker-input",[i.inputClass,{"is-empty":s.inputIsEmpty,invalid:s.hasInvalidInput,"all-selected":s.allValueSelected,disabled:i.disabled,"has-custom-icon":e.$slots&&e.$slots.icon}]],ref:"input",style:s.inputWidthStyle,id:i.id,name:i.name,value:s.inputIsEmpty?null:s.customDisplayTime,placeholder:i.placeholder?i.placeholder:s.formatString,tabindex:i.disabled?-1:i.tabindex,disabled:s.booleanAttr(i.disabled),readonly:s.booleanAttr(!i.manualInput),autocomplete:i.autocomplete,onFocus:t[1]||(t[1]=(...o)=>s.onFocus(...o)),onChange:t[2]||(t[2]=(...o)=>s.onChange(...o)),onBlur:t[3]||(t[3]=o=>{s.debounceBlur(),s.blurEvent()}),onMousedown:t[4]||(t[4]=(...o)=>s.onMouseDown(...o)),onKeydown:[t[5]||(t[5]=(...o)=>s.keyDownHandler(...o)),t[9]||(t[9]=f(c((...o)=>s.escBlur(...o),["exact"]),["esc"]))],onCompositionstart:t[6]||(t[6]=(...o)=>s.onCompostionStart(...o)),onCompositionend:t[7]||(t[7]=(...o)=>s.onCompostionEnd(...o)),onPaste:t[8]||(t[8]=(...o)=>s.pasteHandler(...o))},null,46,["id","name","value","placeholder","tabindex","disabled","readonly","autocomplete"]),s.showClearBtn||s.showDropdownBtn?(u(),h("div",ee,[!a.isActive&&s.showClearBtn?(u(),h("span",{key:0,class:["clear-btn",{"has-custom-btn":e.$slots&&e.$slots.clearButton}],tabindex:"-1",onClick:t[10]||(t[10]=(...o)=>s.clearTime(...o))},[B(e.$slots,"clearButton",{},()=>[te])],2)):g("v-if",!0),s.showDropdownBtn?(u(),h("span",{key:1,class:["dropdown-btn",{"has-custom-btn":e.$slots&&e.$slots.dropdownButton}],tabindex:"-1",onClick:t[11]||(t[11]=o=>s.setDropdownState(i.fixedDropdownButton?!a.showDropdown:!0,!0)),onMousedown:t[12]||(t[12]=(...o)=>s.keepFocusing(...o))},[B(e.$slots,"dropdownButton",{},()=>[se])],34)):g("v-if",!0)])):g("v-if",!0),e.$slots&&e.$slots.icon?(u(),h("div",ie,[B(e.$slots,"icon")])):g("v-if",!0),a.showDropdown?(u(),h("div",{key:2,class:"time-picker-overlay",onClick:t[13]||(t[13]=(...o)=>s.toggleActive(...o)),tabindex:"-1"})):g("v-if",!0),S(d("div",{class:["dropdown",[s.dropdownDirClass]],tabindex:"-1",style:s.inputWidthStyle,onMouseup:t[42]||(t[42]=(...o)=>s.keepFocusing(...o)),onClick:t[43]||(t[43]=c(()=>{},["stop"]))},[d("div",{class:"select-list",style:s.inputWidthStyle,tabindex:"-1"},[g(" Common Keyboard Support: less event listeners "),i.advancedKeyboard?g("v-if",!0):(u(!0),h(b,{key:0},C(s.columnsSequence,o=>(u(),h(b,{key:o},[o==="hour"?(u(),h("ul",{key:0,class:"hours",onScroll:t[14]||(t[14]=(...r)=>s.keepFocusing(...r))},[d("li",{class:"hint",textContent:k(s.hourLabelText)},null,8,["textContent"]),(u(!0),h(b,null,C(a.hours,(r,m)=>(u(),h(b,{key:m},[!s.opts.hideDisabledHours||s.opts.hideDisabledHours&&!s.isDisabled("hour",r)?(u(),h("li",{key:0,class:{active:a.hour===r},disabled:s.booleanAttr(s.isDisabled("hour",r)),"data-key":r,textContent:k(r),onClick:l=>s.select("hour",r)},null,10,["disabled","data-key","textContent","onClick"])):g("v-if",!0)],64))),128))],32)):g("v-if",!0),o==="minute"?(u(),h("ul",{key:1,class:"minutes",onScroll:t[15]||(t[15]=(...r)=>s.keepFocusing(...r))},[d("li",{class:"hint",textContent:k(s.minuteLabelText)},null,8,["textContent"]),(u(!0),h(b,null,C(a.minutes,(r,m)=>(u(),h(b,{key:m},[!s.opts.hideDisabledMinutes||s.opts.hideDisabledMinutes&&!s.isDisabled("minute",r)?(u(),h("li",{key:0,class:{active:a.minute===r},disabled:s.booleanAttr(s.isDisabled("minute",r)),"data-key":r,textContent:k(r),onClick:l=>s.select("minute",r)},null,10,["disabled","data-key","textContent","onClick"])):g("v-if",!0)],64))),128))],32)):g("v-if",!0),o==="second"?(u(),h("ul",{key:2,class:"seconds",onScroll:t[16]||(t[16]=(...r)=>s.keepFocusing(...r))},[d("li",{class:"hint",textContent:k(s.secondLabelText)},null,8,["textContent"]),(u(!0),h(b,null,C(a.seconds,(r,m)=>(u(),h(b,{key:m},[!s.opts.hideDisabledSeconds||s.opts.hideDisabledSeconds&&!s.isDisabled("second",r)?(u(),h("li",{key:0,class:{active:a.second===r},disabled:s.booleanAttr(s.isDisabled("second",r)),"data-key":r,textContent:k(r),onClick:l=>s.select("second",r)},null,10,["disabled","data-key","textContent","onClick"])):g("v-if",!0)],64))),128))],32)):g("v-if",!0),o==="apm"?(u(),h("ul",{key:3,class:"apms",onScroll:t[17]||(t[17]=(...r)=>s.keepFocusing(...r))},[d("li",{class:"hint",textContent:k(s.apmLabelText)},null,8,["textContent"]),(u(!0),h(b,null,C(a.apms,(r,m)=>(u(),h(b,{key:m},[!s.opts.hideDisabledHours||s.opts.hideDisabledHours&&!s.isDisabled("apm",r)?(u(),h("li",{key:0,class:{active:a.apm===r},disabled:s.booleanAttr(s.isDisabled("apm",r)),"data-key":r,textContent:k(s.apmDisplayText(r)),onClick:l=>s.select("apm",r)},null,10,["disabled","data-key","textContent","onClick"])):g("v-if",!0)],64))),128))],32)):g("v-if",!0)],64))),128)),g(" / Common Keyboard Support "),g(`
        Advanced Keyboard Support
        Addeds hundreds of additional event lisenters
      `),i.advancedKeyboard?(u(!0),h(b,{key:1},C(s.columnsSequence,o=>(u(),h(b,{key:o},[o==="hour"?(u(),h("ul",{key:0,class:"hours",tabindex:"-1",onScroll:t[23]||(t[23]=(...r)=>s.keepFocusing(...r))},[d("li",{class:"hint",textContent:k(s.hourLabelText),tabindex:"-1"},null,8,["textContent"]),(u(!0),h(b,null,C(a.hours,(r,m)=>(u(),h(b,{key:m},[!s.opts.hideDisabledHours||s.opts.hideDisabledHours&&!s.isDisabled("hour",r)?(u(),h("li",{key:0,class:{active:a.hour===r},tabindex:s.isDisabled("hour",r)?-1:i.tabindex,"data-key":r,disabled:s.booleanAttr(s.isDisabled("hour",r)),textContent:k(r),onClick:l=>s.select("hour",r),onKeydown:[f(c(l=>s.select("hour",r),["prevent"]),["space"]),f(c(l=>s.select("hour",r),["prevent"]),["enter"]),f(c(l=>s.prevItem("hour",r),["prevent"]),["up"]),f(c(l=>s.nextItem("hour",r),["prevent"]),["down"]),t[18]||(t[18]=f(c(l=>s.toLeftColumn("hour"),["prevent"]),["left"])),t[19]||(t[19]=f(c(l=>s.toRightColumn("hour"),["prevent"]),["right"])),t[20]||(t[20]=f(c((...l)=>s.debounceBlur(...l),["exact"]),["esc"]))],onBlur:t[21]||(t[21]=(...l)=>s.debounceBlur(...l)),onFocus:t[22]||(t[22]=(...l)=>s.keepFocusing(...l))},null,42,["tabindex","data-key","disabled","textContent","onClick","onKeydown"])):g("v-if",!0)],64))),128))],32)):g("v-if",!0),o==="minute"?(u(),h("ul",{key:1,class:"minutes",tabindex:"-1",onScroll:t[29]||(t[29]=(...r)=>s.keepFocusing(...r))},[d("li",{class:"hint",textContent:k(s.minuteLabelText),tabindex:"-1"},null,8,["textContent"]),(u(!0),h(b,null,C(a.minutes,(r,m)=>(u(),h(b,{key:m},[!s.opts.hideDisabledMinutes||s.opts.hideDisabledMinutes&&!s.isDisabled("minute",r)?(u(),h("li",{key:0,class:{active:a.minute===r},tabindex:s.isDisabled("minute",r)?-1:i.tabindex,"data-key":r,disabled:s.booleanAttr(s.isDisabled("minute",r)),textContent:k(r),onClick:l=>s.select("minute",r),onKeydown:[f(c(l=>s.select("minute",r),["prevent"]),["space"]),f(c(l=>s.select("minute",r),["prevent"]),["enter"]),f(c(l=>s.prevItem("minute",r),["prevent"]),["up"]),f(c(l=>s.nextItem("minute",r),["prevent"]),["down"]),t[24]||(t[24]=f(c(l=>s.toLeftColumn("minute"),["prevent"]),["left"])),t[25]||(t[25]=f(c(l=>s.toRightColumn("minute"),["prevent"]),["right"])),t[26]||(t[26]=f(c((...l)=>s.debounceBlur(...l),["exact"]),["esc"]))],onBlur:t[27]||(t[27]=(...l)=>s.debounceBlur(...l)),onFocus:t[28]||(t[28]=(...l)=>s.keepFocusing(...l))},null,42,["tabindex","data-key","disabled","textContent","onClick","onKeydown"])):g("v-if",!0)],64))),128))],32)):g("v-if",!0),o==="second"?(u(),h("ul",{key:2,class:"seconds",tabindex:"-1",onScroll:t[35]||(t[35]=(...r)=>s.keepFocusing(...r))},[d("li",{class:"hint",textContent:k(s.secondLabelText),tabindex:"-1"},null,8,["textContent"]),(u(!0),h(b,null,C(a.seconds,(r,m)=>(u(),h(b,{key:m},[!s.opts.hideDisabledSeconds||s.opts.hideDisabledSeconds&&!s.isDisabled("second",r)?(u(),h("li",{key:0,class:{active:a.second===r},tabindex:s.isDisabled("second",r)?-1:i.tabindex,"data-key":r,disabled:s.booleanAttr(s.isDisabled("second",r)),textContent:k(r),onClick:l=>s.select("second",r),onKeydown:[f(c(l=>s.select("second",r),["prevent"]),["space"]),f(c(l=>s.select("second",r),["prevent"]),["enter"]),f(c(l=>s.prevItem("second",r),["prevent"]),["up"]),f(c(l=>s.nextItem("second",r),["prevent"]),["down"]),t[30]||(t[30]=f(c(l=>s.toLeftColumn("second"),["prevent"]),["left"])),t[31]||(t[31]=f(c(l=>s.toRightColumn("second"),["prevent"]),["right"])),t[32]||(t[32]=f(c((...l)=>s.debounceBlur(...l),["exact"]),["esc"]))],onBlur:t[33]||(t[33]=(...l)=>s.debounceBlur(...l)),onFocus:t[34]||(t[34]=(...l)=>s.keepFocusing(...l))},null,42,["tabindex","data-key","disabled","textContent","onClick","onKeydown"])):g("v-if",!0)],64))),128))],32)):g("v-if",!0),o==="apm"?(u(),h("ul",{key:3,class:"apms",tabindex:"-1",onScroll:t[41]||(t[41]=(...r)=>s.keepFocusing(...r))},[d("li",{class:"hint",textContent:k(s.apmLabelText),tabindex:"-1"},null,8,["textContent"]),(u(!0),h(b,null,C(a.apms,(r,m)=>(u(),h(b,{key:m},[!s.opts.hideDisabledHours||s.opts.hideDisabledHours&&!s.isDisabled("apm",r)?(u(),h("li",{key:0,class:{active:a.apm===r},tabindex:s.isDisabled("apm",r)?-1:i.tabindex,"data-key":r,disabled:s.booleanAttr(s.isDisabled("apm",r)),textContent:k(s.apmDisplayText(r)),onClick:l=>s.select("apm",r),onKeydown:[f(c(l=>s.select("apm",r),["prevent"]),["space"]),f(c(l=>s.select("apm",r),["prevent"]),["enter"]),f(c(l=>s.prevItem("apm",r),["prevent"]),["up"]),f(c(l=>s.nextItem("apm",r),["prevent"]),["down"]),t[36]||(t[36]=f(c(l=>s.toLeftColumn("apm"),["prevent"]),["left"])),t[37]||(t[37]=f(c(l=>s.toRightColumn("apm"),["prevent"]),["right"])),t[38]||(t[38]=f(c((...l)=>s.debounceBlur(...l),["exact"]),["esc"]))],onBlur:t[39]||(t[39]=(...l)=>s.debounceBlur(...l)),onFocus:t[40]||(t[40]=(...l)=>s.keepFocusing(...l))},null,42,["tabindex","data-key","disabled","textContent","onClick","onKeydown"])):g("v-if",!0)],64))),128))],32)):g("v-if",!0)],64))),128)):g("v-if",!0),g(" / Advanced Keyboard Support ")],4)],38),[[v,a.showDropdown]])],4)}N.render=ne;N.__file="src/VueTimepicker.vue";const re={components:{VueTimepicker:N},data(){return{negotiationStatuses:[]}},mounted(){console.log("gaaa"),this.initialize()},methods:{async initialize(){await Promise.all([this.$store.dispatch("negotiationStatusesModule/list",{sort:"createdAt",order:"asc"})]),this.negotiationStatuses=JSON.parse(JSON.stringify(this.$store.state.negotiationStatusesModule.negotiationStatuses));for(const e of this.negotiationStatuses){e.isEditing=!1;for(const t of e.automations)t.afterTimeFormatted=P(t.afterTime)}},async save(e,t){e.isEditing=!1;for(const i of e.automations){let[n,a,s]=i.afterTimeFormatted.split(":");i.afterTime=n*60*60*1e3+a*60*1e3+s*1e3}e._id?await this.$store.dispatch("negotiationStatusesModule/update",{id:e._id,data:e}):this.negotiationStatuses[t]=await this.$store.dispatch("negotiationStatusesModule/create",{...e});for(const i of this.negotiationStatuses){i.isEditing=!1;for(const n of i.automations)n.afterTimeFormatted=P(n.afterTime)}},addAutomation(e){e.automations.push({name:"Nuevo mensaje",message:"Nuevo mensaje",afterTime:0,afterTimeFormatted:"00:00:00"})},addNegotiationStatus(e){e.push({isEditing:!0,name:"Nuevo estado",automations:[{name:"Nuevo mensaje",message:"Nuevo mensaje",afterTime:0,afterTimeFormatted:"00:00:00"}]})},deletes(e,t){e[t]._id&&this.$store.dispatch("negotiationStatusesModule/delete",e[t]._id),e.splice(t,1)}}},ae=E("b",null,"Se activar\xE1 despu\xE9s de",-1),le={class:"ml-2"},oe=E("i",{class:"mr-2 mdi text-h5 mdi-clock-start"},null,-1);function ue(e,t,i,n,a,s){const o=O("v-card-header-text"),r=O("vue-timepicker"),m=O("v-card-header");return u(),h(U,{fluid:""},{default:p(()=>[d(M,{class:"mb-3"},{default:p(()=>[d(V,{cols:"12",sm:"12"},{default:p(()=>[d(A,{onClick:t[0]||(t[0]=l=>s.addNegotiationStatus(a.negotiationStatuses)),color:"success"},{default:p(()=>[I(" Nuevo "),d(K,{activator:"parent",anchor:"bottom"},{default:p(()=>[I(" Nuevo estado de negociaci\xF3n ")]),_:1})]),_:1})]),_:1})]),_:1}),d(M,null,{default:p(()=>[(u(!0),J(b,null,C(a.negotiationStatuses,(l,T)=>(u(),h(V,{cols:"12",sm:"4",key:l._id},{default:p(()=>[d(z,{class:"mb-3 mr-3"},{default:p(()=>[d(o,null,{default:p(()=>[d(W,null,{default:p(()=>[S(E("h5",null,k(l.name),513),[[v,!l.isEditing]]),S(d(Y,{density:"compact","hide-details":"",variant:"outlined",modelValue:l.name,"onUpdate:modelValue":y=>l.name=y,class:"mb-2"},null,8,["modelValue","onUpdate:modelValue"]),[[v,l.isEditing]])]),_:2},1024)]),_:2},1024),d(j),d(U,{fluid:""},{default:p(()=>[(u(!0),J(b,null,C(l.automations,(y,R)=>(u(),h(z,{class:"mb-2",key:y._id},{default:p(()=>[d(m,null,{default:p(()=>[d(o,null,{default:p(()=>[d(V,{cols:"12",sm:"12",md:"12"},{default:p(()=>[d(M,null,{default:p(()=>[d(V,{cols:"12",sm:"10"},{default:p(()=>[E("h5",null,"Mensaje "+k(R+1),1)]),_:2},1024),S(d(V,{cols:"12",sm:"2"},{default:p(()=>[d(A,{small:"",variant:"text",color:"error",onClick:w=>l.automations.splice(R,1)},{default:p(()=>[I("Borrar")]),_:2},1032,["onClick"])]),_:2},1536),[[v,l.isEditing]])]),_:2},1024),d(j),d(V,{cols:"12",sm:"12"},{default:p(()=>[ae,S(d(r,{class:"ml-2",format:"HH:mm:ss",modelValue:y.afterTimeFormatted,"onUpdate:modelValue":w=>y.afterTimeFormatted=w},null,8,["modelValue","onUpdate:modelValue"]),[[v,l.isEditing]]),S(E("span",le,[oe,I(" "+k(y.afterTimeFormatted),1)],512),[[v,!l.isEditing]])]),_:2},1024)]),_:2},1024),d(q,null,{default:p(()=>[I(k(y.name),1)]),_:2},1024)]),_:2},1024)]),_:2},1024),S(d(G,null,{default:p(()=>[I(k(y.message),1)]),_:2},1536),[[v,!l.isEditing]]),S(d(X,{class:"ma-2",modelValue:y.message,"onUpdate:modelValue":w=>y.message=w,rows:"2",variant:"outlined"},null,8,["modelValue","onUpdate:modelValue"]),[[v,l.isEditing]])]),_:2},1024))),128)),S(d(A,{onClick:y=>s.addAutomation(l),small:"",icon:"",color:"success"},{default:p(()=>[d(Z,{class:"wechat-color"},{default:p(()=>[I("mdi-plus-box")]),_:1}),d(K,{activator:"parent",anchor:"bottom"},{default:p(()=>[I(" Agregar ")]),_:1})]),_:2},1032,["onClick"]),[[v,l.isEditing]])]),_:2},1024),d(Q,null,{default:p(()=>[d(_),S(d(A,{onClick:y=>s.save(l,T),color:"success"},{default:p(()=>[I("Guardar")]),_:2},1032,["onClick"]),[[v,l.isEditing]]),S(d(A,{onClick:y=>l.isEditing=!0,color:"info"},{default:p(()=>[I("Editar")]),_:2},1032,["onClick"]),[[v,!l.isEditing]]),d(A,{color:"error",onClick:y=>s.deletes(a.negotiationStatuses,T)},{default:p(()=>[I("Borrar")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})}var me=$(re,[["render",ue]]);export{me as default};
